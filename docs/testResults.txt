
   PASS  Tests\Unit\Accounting\AccountTypeValidationTest
  âœ“ it allows debit to asset accounts                                    0.27s  
  âœ“ it allows debit to expense accounts                                  0.02s  
  âœ“ it throws exception when debiting liability account                  0.02s  
  âœ“ it allows credit to liability accounts                               0.02s  
  âœ“ it allows credit to revenue accounts                                 0.02s  
  âœ“ it throws exception when crediting asset account                     0.02s  
  âœ“ it validates account types during transaction posting                0.02s  

   PASS  Tests\Unit\Accounting\BalanceSheetTest
  âœ“ it generates balance sheet with no transactions                      0.05s  
  âœ“ it generates balanced balance sheet                                  0.05s  
  âœ“ it includes retained earnings from income statement                  0.05s  

   PASS  Tests\Unit\Accounting\ChartOfAccountTest
  âœ“ it has a code name and type                                          0.03s  
  âœ“ it can scope accounts by type                                        0.03s  
  âœ“ account code must be unique                                          0.03s  
  âœ“ it can calculate its current balance                                 0.03s  

   PASS  Tests\Unit\Accounting\DimensionReportTest
  âœ“ example                                                              0.12s  

   PASS  Tests\Unit\Accounting\FinancialReportsTest
  âœ“ example                                                              0.09s  

   PASS  Tests\Unit\Accounting\IncomeStatementTest
  âœ“ it generates income statement with no transactions                   0.02s  
  âœ“ it generates income statement with revenue and expenses              0.03s  
  âœ“ it excludes transactions outside date range                          0.02s  

   PASS  Tests\Unit\Accounting\InvalidAccountTypeExceptionTest
  âœ“ it provides detailed error message                                   0.02s  
  âœ“ it provides contextual information                                   0.01s  
  âœ“ it allows custom message                                             0.01s  

   PASS  Tests\Unit\Accounting\JournalEntryFactoryTest
  âœ“ it can create a journal entry                                        0.02s  
  âœ“ it can create a draft journal entry                                  0.02s  
  âœ“ it can create a posted journal entry                                 0.02s  
  âœ“ it can create journal entry with specific approver                   0.02s  

   PASS  Tests\Unit\Accounting\JournalEntryTest
  âœ“ it can create a journal entry                                        0.03s  
  âœ“ it can post a balanced journal entry                                 0.02s  
  âœ“ it prevents posting unbalanced journal entries                       0.02s  

   PASS  Tests\Unit\Accounting\LedgerEntryTest
  âœ“ it belongs to a chart of account                                     0.02s  
  âœ“ it has a debit or credit type                                        0.02s  
  âœ“ it can be linked to a transaction via polymorphic relation           0.02s  
  âœ“ it can be tagged with dimensions                                     0.02s  
  âœ“ it must have a positive amount                                       0.02s  

   PASS  Tests\Unit\Accounting\TrialBalanceTest
  âœ“ it generates trial balance with zero entries                         0.02s  
  âœ“ it generates trial balance with balanced entries                     0.02s  
  âœ“ it shows account balances in trial balance                           0.02s  

   PASS  Tests\Unit\Models\Inventory\InventoryTransactionTest
  âœ“ example                                                              0.02s  

   PASS  Tests\Unit\Models\Inventory\ItemTest
  âœ“ example                                                              0.01s  

   PASS  Tests\Unit\Models\Inventory\StoreTest
  âœ“ example                                                              0.02s  

   PASS  Tests\Unit\AccountingReportServiceTest
  âœ“ it generates a correct trial balance                                 0.02s  
  âœ“ it generates a correct balance sheet                                 0.02s  

   PASS  Tests\Unit\Accounting\AccountingServiceTest
  âœ“ it throws an exception for unbalanced transactions                   0.02s  
  âœ“ it successfully posts a balanced transaction and creates ledger entâ€¦ 0.02s  
  âœ“ it can handle complex but balanced transactions                      0.02s  

   PASS  Tests\Unit\Services\InventoryServiceTest
  âœ“ it can create a store                                                0.05s  
  âœ“ it can update store inventory                                        0.03s  
  âœ“ it can update store inventory with min max stock                     0.03s  
  âœ“ it can adjust store inventory                                        0.04s  
  âœ“ it can create and finalize transaction                               0.04s  
  âœ“ it can cancel transaction                                            0.03s  
  âœ“ it can get store stock levels                                        0.03s  
  âœ“ it can get item availability                                         0.03s  
  âœ“ it prevents modifying finalized transaction                          0.04s  
  âœ“ it prevents finalizing transaction with no items                     0.03s  
  âœ“ it prevents cancelling finalized transaction                         0.03s  
  âœ“ it calculates low stock correctly                                    0.04s  
  âœ“ it calculates overstock correctly                                    0.03s  

   PASS  Tests\Unit\Services\SequenceServiceTest
  âœ“ it generates sequential codes                                        0.02s  
  âœ“ it handles concurrent requests safely                                0.02s  

   PASS  Tests\Unit\Teams\CreateTeamTest
  âœ“ teams can be created                                                 0.06s  

   PASS  Tests\Unit\Teams\DeleteTeamTest
  âœ“ teams can be deleted                                                 0.04s  
  âœ“ personal teams cant be deleted                                       0.04s  

   PASS  Tests\Unit\Teams\InviteTeamMemberTest
  âœ“ team members can be invited to team                                  0.07s  
  âœ“ team member invitations can be cancelled                             0.07s  

   PASS  Tests\Unit\Teams\LeaveTeamTest
  âœ“ users can leave teams                                                0.05s  
  âœ“ team owners cant leave their own team                                0.05s  

   PASS  Tests\Unit\Teams\RemoveTeamMemberTest
  âœ“ team members can be removed from teams                               0.07s  
  âœ“ only team owner can remove team members                              0.05s  

   PASS  Tests\Unit\Teams\UpdateTeamMemberRoleTest
  âœ“ team member roles can be updated                                     0.09s  
  âœ“ only team owner can update team member roles                         0.06s  

   PASS  Tests\Unit\Teams\UpdateTeamNameTest
  âœ“ team names can be updated                                            0.05s  

   PASS  Tests\Unit\base\ApiTokenPermissionsTest
  âœ“ api token permissions can be updated                                 0.07s  

   PASS  Tests\Unit\base\AuthenticationTest
  âœ“ login screen can be rendered                                         0.04s  
  âœ“ users can authenticate using the login screen                        0.04s  
  âœ“ users cannot authenticate with invalid password                      0.04s  

   PASS  Tests\Unit\base\BrowserSessionsTest
  âœ“ other browser sessions can be logged out                             0.05s  

   PASS  Tests\Unit\base\CreateApiTokenTest
  âœ“ api tokens can be created                                            0.06s  

   PASS  Tests\Unit\base\DeleteAccountTest
  âœ“ user accounts can be deleted                                         0.05s  
  âœ“ correct password must be provided before account can be deleted      0.05s  

   PASS  Tests\Unit\base\DeleteApiTokenTest
  âœ“ api tokens can be deleted                                            0.07s  

   WARN  Tests\Unit\base\EmailVerificationTest
  - email verification screen can be rendered â†’ Email verification notâ€¦  0.02s  
  - email can be verified â†’ Email verification not enabled.              0.01s  
  - email can not verified with invalid hash â†’ Email verification not eâ€¦ 0.01s  

   PASS  Tests\Unit\base\PasswordConfirmationTest
  âœ“ confirm password screen can be rendered                              0.05s  
  âœ“ password can be confirmed                                            0.04s  
  âœ“ password is not confirmed with invalid password                      0.24s  

   PASS  Tests\Unit\base\PasswordResetTest
  âœ“ reset password link screen can be rendered                           0.05s  
  âœ“ reset password link can be requested                                 0.26s  
  âœ“ reset password screen can be rendered                                0.26s  
  âœ“ password can be reset with valid token                               0.26s  

   PASS  Tests\Unit\base\ProfileInformationTest
  âœ“ current profile information is available                             0.05s  
  âœ“ profile information can be updated                                   0.04s  

   WARN  Tests\Unit\base\RegistrationTest
  âœ“ registration screen can be rendered                                  0.03s  
  - registration screen cannot be rendered if support is disabled â†’ Regâ€¦ 0.01s  
  âœ“ new users can register                                               0.03s  

   PASS  Tests\Unit\base\TwoFactorAuthenticationSettingsTest
  âœ“ two factor authentication can be enabled                             0.15s  
  âœ“ recovery codes can be regenerated                                    0.14s  
  âœ“ two factor authentication can be disabled                            0.10s  

   PASS  Tests\Unit\base\UpdatePasswordTest
  âœ“ password can be updated                                              0.07s  
  âœ“ current password must be correct                                     0.05s  
  âœ“ new passwords must match                                             0.06s  

   PASS  Tests\Feature\Api\Accounting\ChartOfAccountsApiTest
  âœ“ it can list chart of accounts                                        0.05s  
  âœ“ it can create a chart of account                                     0.04s  
  âœ“ it validates account creation                                        0.05s  
  âœ“ it can show a specific account                                       0.04s  
  âœ“ it returns 404 for nonexistent account                               0.05s  

   PASS  Tests\Feature\Api\Accounting\FinancialReportsApiTest
  âœ“ it can generate trial balance                                        0.05s  
  âœ“ it can generate balance sheet                                        0.05s  
  âœ“ it can generate income statement                                     0.05s  
  âœ“ it validates income statement date range                             0.04s  
  âœ“ it rejects end date before start date                                0.04s  

   PASS  Tests\Feature\Api\Accounting\JournalEntriesApiTest
  âœ“ it can create a journal entry                                        0.05s  
  âœ“ it validates journal entry balances                                  0.05s  
  âœ“ it can post a journal entry                                          0.04s  

   FAIL  Tests\Feature\OrganizationApiTest
  âœ“ can create organization                                              0.04s  
  âœ“ debug factory output                                                 0.02s  
  âœ“ verify organization factory works                                    0.02s  
  âœ“ can list organizations                                               0.04s  
  âœ“ can show organization                                                0.04s  
  âœ“ can update organization                                              0.04s  
  â¨¯ can delete organization                                              0.04s  
  â¨¯ guests cannot access organizations                                   0.05s  
  âœ“ name is required for creation                                        0.04s  
  âœ“ name must be unique                                                  0.04s  
  âœ“ user can view their organizations                                    0.04s  
  âœ“ organization admin can list members                                  0.04s  
  âœ“ admin can invite new members                                         0.04s  
  âœ“ cannot invite existing member                                        0.04s  
  âœ“ non admin cannot invite members                                      0.04s  

   FAIL  Tests\Feature\OrganizationUnitApiTest
  âœ“ can create organization unit                                         0.07s  
  âœ“ can create nested unit                                               0.04s  
  âœ“ can get unit hierarchy                                               0.05s  
  âœ“ can assign user to unit                                              0.04s  
  â¨¯ can list users by organization unit                                  0.05s  
  â¨¯ cannot create organization unit as non admin                         0.02s  
  âœ“ cannot assign user as non admin                                      0.04s  
  âœ“ cannot create unit with invalid data                                 0.04s  
  âœ“ cannot assign non existent user to unit                              0.04s  
  âœ“ cannot assign user not in organization                               0.04s  
  âœ“ cannot get hierarchy for non existent unit                           0.05s  
  âœ“ can get hierarchy for unit with no children                          0.04s  

   FAIL  Tests\Feature\DashboardTest
  âœ“ it redirects to setup for users without organization                 0.05s  
  â¨¯ it shows dashboard for users with organization                       0.02s  
  â¨¯ it shows dashboard sections                                          0.02s  
  â¨¯ it shows store inventory summary                                     0.02s  
  â¨¯ it shows low stock alerts                                            0.02s  
  â¨¯ it shows recent transactions                                         0.02s  
  â¨¯ it shows quick action buttons                                        0.02s  
  â¨¯ it shows stats cards                                                 0.02s  
  â¨¯ it shows empty state for no stores                                   0.02s  
  â¨¯ it shows all stocked message when no low stock                       0.02s  
  â¨¯ it shows store with item counts                                      0.02s  

   PASS  Tests\Feature\ExampleTest
  âœ“ it returns a successful response                                     0.06s  

   FAIL  Tests\Feature\Inventory\ItemTest
  âœ“ it can create an item                                                0.06s  
  âœ“ it can search items by name or sku                                   0.08s  
  âœ“ it can filter items by category                                      0.08s  
  âœ“ it can sort items                                                    0.08s  
  âœ“ it returns only items from users organization                        0.07s  
  âœ“ it can get item availability across stores                           0.07s  
  âœ“ it shows low stock status correctly                                  0.07s  
  â¨¯ it returns 403 for unauthorized access                               0.07s  
  âœ“ it handles item with no stores                                       0.08s  

   FAIL  Tests\Feature\Inventory\PermissionTest
  âœ“ inventory admin has all permissions                                  0.08s  
  âœ“ store manager cannot delete stores                                   0.07s  
  âœ“ inventory clerk cannot finalize transactions                         0.08s  
  âœ“ auditor can only view inventory                                      0.07s  
  â¨¯ user cannot access other organization inventory                      0.08s  

   PASS  Tests\Feature\Inventory\StoreTest
  âœ“ it can create a store                                                0.07s  
  âœ“ it can add items to store                                            0.07s  
  âœ“ it can retrieve store with items                                     0.07s  
  âœ“ it can update item quantity in store                                 0.07s  
  âœ“ it can list all stores for organization                              0.10s  
  âœ“ it can use organization scope                                        0.05s  
  âœ“ it can use search scope                                              0.05s  
  âœ“ it can use active scope                                              0.05s  

   PASS  Tests\Feature\Inventory\TransactionTest
  âœ“ it can create draft transaction without items                        0.08s  
  âœ“ it can create draft transaction with items                           0.08s  
  âœ“ it can add items to empty draft transaction                          0.09s  
  âœ“ it can add items to transaction with existing items                  0.08s  
  âœ“ it can finalize transaction created without items after adding itemâ€¦ 0.09s  
  âœ“ it can finalize transaction created with items                       0.08s  
  âœ“ it cannot finalize empty transaction                                 0.07s  
  âœ“ it cannot add items to finalized transaction                         0.08s  
  âœ“ it can list transactions by status                                   0.11s  
  âœ“ it can calculate transaction totals                                  0.08s  
  âœ“ it cannot modify finalized transaction                               0.09s  
  âœ“ it can calculate totals for empty transaction                        0.07s  

   PASS  Tests\Feature\Livewire\Accounting\ChartOfAccountsTest
  âœ“ chart of accounts page renders                                       0.06s  
  âœ“ it displays a list of accounts                                       0.05s  
  âœ“ it displays a list of chart of accounts                              0.05s  
  âœ“ it can create a new chart of account record                          0.06s  
  âœ“ it can update an existing chart of account record                    0.06s  

   FAIL  Tests\Feature\Livewire\Accounting\JournalEntriesTest
  âœ“ it renders successfully                                              0.05s  
  â¨¯ it creates a journal entry                                           0.09s  
  âœ“ a journal entry requires balanced debits and credits                 0.08s  

   PASS  Tests\Feature\Livewire\Organization\MemberManagerTest
  âœ“ it can display a list of organization members                        0.05s  
  âœ“ it can search for members by name or email                           0.05s  

   PASS  Tests\Feature\Livewire\Organization\OrganizationFormTest
  âœ“ it shows create form                                                 0.05s  
  âœ“ it shows edit form                                                   0.04s  
  âœ“ it creates new organization                                          0.05s  
  âœ“ it updates existing organization                                     0.06s  
  âœ“ it validates required fields                                         0.05s  
  âœ“ it validates unique name                                             0.05s  
  âœ“ it closes modal                                                      0.05s  

   FAIL  Tests\Feature\Livewire\Organization\OrganizationListTest
  âœ“ it shows organizations list                                          0.06s  
  âœ“ it searches organizations by name                                    0.05s  
  âœ“ it sorts organizations by name ascending                             0.05s  
  âœ“ it sorts organizations by name descending                            0.06s  
  âœ“ it sorts organizations by status                                     0.05s  
  âœ“ it paginates organizations                                           0.07s  
  â¨¯ it shows empty state when no organizations                           0.04s  

   PASS  Tests\Feature\Livewire\Organization\OrganizationTreeTest
  âœ“ it can display the organization tree                                 0.06s  
  âœ“ an organization unit can be dragged and dropped to another parent    0.07s  
  âœ“ an organizational unit cannot be dropped onto itself                 0.05s  
  âœ“ an organizational unit can be dropped as a root node                 0.05s  
  âœ“ a parent cannot be dropped onto one of its descendants               0.06s  
  âœ“ a sibling can be dropped under another sibling                       0.06s  
  âœ“ an empty tree renders correctly                                      0.04s  
  âœ“ it can handle a large number of units without crashing               0.15s  
  âœ“ a dropped unit that does not exist does not cause an error           0.05s  

   FAIL  UserPlacementTest
  âœ“ it can assign a user to a unit                                       0.07s  
  â¨¯ it can unassign a user by dropping them onto the root                0.05s  

   FAIL  Tests\Feature\MultiStepSetupWizardTest
  âœ“ it shows organization step for new users                             0.07s  
  âœ“ it can store organization and proceed to store step                  0.06s  
  âœ“ it shows store setup step after organization                         0.07s  
  âœ“ it can create first store and proceed to accounting                  0.07s  
  â¨¯ it shows accounting setup step after store                           0.08s  
  âœ“ it can setup chart of accounts and complete wizard                   0.08s  
  âœ“ it redirects to correct step based on progress                       0.06s  

   PASS  Tests\Feature\SetupChartOfAccountsTest
  âœ“ it creates default chart of accounts                                 0.07s  
  âœ“ it skips account creation if not requested                           0.06s  
  âœ“ it creates organization unit for accounting department               0.07s  

   PASS  Tests\Feature\SetupStoreTest
  âœ“ it creates first store for organization                              0.07s  
  âœ“ it validates store creation                                          0.06s  
  âœ“ it auto generates store code if not provided                         0.06s  

   FAIL  Tests\Feature\SetupWizardTest
  âœ“ it shows setup wizard for new users                                  0.05s  
  âœ“ it redirects to dashboard if organization exists                     0.04s  
  âœ“ it can create organization through wizard                            0.04s  
  âœ“ it validates organization creation                                   0.05s  
  â¨¯ it assigns admin role to creator                                     0.01s  

   PASS  Tests\Feature\TenancyFeatureTest
  âœ“ queries are automatically scoped to the authenticated users organizâ€¦ 0.05s  
  âœ“ organization id is automatically set on creation                     0.05s  
  âœ“ global scope can be bypassed for admin queries                       0.05s  
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\OrganizationApiTest > can delete orâ€¦  QueryException   
  SQLSTATE[HY000]: General error: 1 no such table: 1 (Connection: sqlite, SQL: select exists(select * from "1" where "deleted_at" is not null) as "exists")

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:406
    402â–•             // For select statements, we'll simply execute the query and return an array
    403â–•             // of the database result set. Each element in the array will be a single
    404â–•             // row from the database table, and will either be an array or objects.
    405â–•             $statement = $this->prepared(
  âžœ 406â–•                 $this->getPdoForSelect($useReadPdo)->prepare($query)
    407â–•             );
    408â–• 
    409â–•             $this->bindValues($statement, $this->prepareBindings($bindings));
    410â–•

      [2m+5 vendor frames [22m
  6   tests/Feature/Api/Organization/OrganizationApiTest.php:137

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\OrganizationApiTest > guests cannot access organizaâ€¦   
  Expected response status code [401] but received 200.
Failed asserting that 200 is identical to 401.

  at tests/Feature/Api/Organization/OrganizationApiTest.php:145
    141â–•     {
    142â–•         $org = Organization::factory()->create();
    143â–• 
    144â–•         // Index
  âžœ 145â–•         $this->getJson('/api/organizations')->assertUnauthorized();
    146â–• 
    147â–•         // Show
    148â–•         $this->getJson("/api/organizations/{$this->organization->id}")->assertUnauthorized();
    149â–•

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\OrganizationUnitApiTest > can list users by organizâ€¦   
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

PDOException: SQLSTATE[HY000]: General error: 1 ambiguous column name: organization_id in /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Connection.php:406
Stack trace:
#0 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Connection.php(406): PDO->prepare()
#1 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Connection.php(811): Illuminate\Database\Connection->{closure:Illuminate\Database\Connection::select():397}()
#2 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Connection.php(778): Illuminate\Database\Connection->runQueryCallback()
#3 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Connection.php(397): Illuminate\Database\Connection->run()
#4 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php(3188): Illuminate\Database\Connection->select()
#5 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php(3173): Illuminate\Database\Query\Builder->runSelect()
#6 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php(3763): Illuminate\Database\Query\Builder->{closure:Illuminate\Database\Query\Builder::get():3172}()
#7 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php(3172): Illuminate\Database\Query\Builder->onceWithColumns()
#8 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php(902): Illuminate\Database\Query\Builder->get()
#9 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Relations/BelongsToMany.php(910): Illuminate\Database\Eloquent\Builder->getModels()
#10 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Relations/BelongsToMany.php(894): Illuminate\Database\Eloquent\Relations\BelongsToMany->get()
#11 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Concerns/HasAttributes.php(635): Illuminate\Database\Eloquent\Relations\BelongsToMany->getResults()
#12 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Concerns/HasAttributes.php(573): Illuminate\Database\Eloquent\Model->getRelationshipFromMethod()
#13 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Concerns/HasAttributes.php(494): Illuminate\Database\Eloquent\Model->getRelationValue()
#14 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php(2423): Illuminate\Database\Eloquent\Model->getAttribute()
#15 /home/gg/dev/hrm-laravel-base/app/Http/Controllers/Api/OrganizationUnitController.php(187): Illuminate\Database\Eloquent\Model->__get()
#16 [internal function]: App\Http\Controllers\Api\OrganizationUnitController->{closure:App\Http\Controllers\Api\OrganizationUnitController::members():186}()
#17 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Collections/Arr.php(786): array_map()
#18 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Collections/Collection.php(814): Illuminate\Support\Arr::map()
#19 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Collection.php(418): Illuminate\Support\Collection->map()
#20 /home/gg/dev/hrm-laravel-base/app/Http/Controllers/Api/OrganizationUnitController.php(186): Illuminate\Database\Eloquent\Collection->map()
#21 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(46): App\Http\Controllers\Api\OrganizationUnitController->members()
#22 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch()
#23 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#24 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#25 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}()
#26 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#27 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle()
#28 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#29 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle()
#30 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#31 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then()
#32 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack()
#33 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute()
#34 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute()
#35 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch()
#36 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}()
#37 /home/gg/dev/hrm-laravel-base/vendor/livewire/livewire/src/Features/SupportDisablingBackButtonCache/DisableBackButtonCacheMiddleware.php(19): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#38 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Livewire\Features\SupportDisablingBackButtonCache\DisableBackButtonCacheMiddleware->handle()
#39 /home/gg/dev/hrm-laravel-base/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(59): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#40 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Barryvdh\Debugbar\Middleware\InjectDebugbar->handle()
#41 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#42 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#43 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle()
#44 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#45 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#46 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle()
#47 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#48 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle()
#49 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#50 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle()
#51 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#52 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle()
#53 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#54 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle()
#55 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#56 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle()
#57 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#58 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle()
#59 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#60 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then()
#61 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter()
#62 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle()
#63 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call()
#64 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json()
#65 /home/gg/dev/hrm-laravel-base/tests/Feature/Api/Organization/OrganizationUnitApiTest.php(140): Illuminate\Foundation\Testing\TestCase->getJson()
#66 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(1656): Tests\Feature\OrganizationUnitApiTest->can_list_users_by_organization_unit()
#67 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(514): PHPUnit\Framework\TestCase->runTest()
#68 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#69 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run()
#70 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#71 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#72 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#73 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#74 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run()
#75 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/src/Kernel.php(103): PHPUnit\TextUI\Application->run()
#76 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(184): Pest\Kernel->handle()
#77 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(192): {closure:/home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest:18}()
#78 {main}

Next Illuminate\Database\QueryException: SQLSTATE[HY000]: General error: 1 ambiguous column name: organization_id (Connection: sqlite, SQL: select "organization_units".*, "organization_user"."user_id" as "pivot_user_id", "organization_user"."organization_unit_id" as "pivot_organization_unit_id", "organization_user"."organization_id" as "pivot_organization_id", "organization_user"."position" as "pivot_position", "organization_user"."roles" as "pivot_roles", "organization_user"."permissions" as "pivot_permissions", "organization_user"."created_at" as "pivot_created_at", "organization_user"."updated_at" as "pivot_updated_at" from "organization_units" inner join "organization_user" on "organization_units"."id" = "organization_user"."organization_unit_id" where "organization_user"."user_id" = 1 and "organization_units"."deleted_at" is null and "organization_id" = 1) in /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
Stack trace:
#0 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Connection.php(778): Illuminate\Database\Connection->runQueryCallback()
#1 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Connection.php(397): Illuminate\Database\Connection->run()
#2 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php(3188): Illuminate\Database\Connection->select()
#3 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php(3173): Illuminate\Database\Query\Builder->runSelect()
#4 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php(3763): Illuminate\Database\Query\Builder->{closure:Illuminate\Database\Query\Builder::get():3172}()
#5 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php(3172): Illuminate\Database\Query\Builder->onceWithColumns()
#6 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php(902): Illuminate\Database\Query\Builder->get()
#7 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Relations/BelongsToMany.php(910): Illuminate\Database\Eloquent\Builder->getModels()
#8 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Relations/BelongsToMany.php(894): Illuminate\Database\Eloquent\Relations\BelongsToMany->get()
#9 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Concerns/HasAttributes.php(635): Illuminate\Database\Eloquent\Relations\BelongsToMany->getResults()
#10 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Concerns/HasAttributes.php(573): Illuminate\Database\Eloquent\Model->getRelationshipFromMethod()
#11 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Concerns/HasAttributes.php(494): Illuminate\Database\Eloquent\Model->getRelationValue()
#12 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php(2423): Illuminate\Database\Eloquent\Model->getAttribute()
#13 /home/gg/dev/hrm-laravel-base/app/Http/Controllers/Api/OrganizationUnitController.php(187): Illuminate\Database\Eloquent\Model->__get()
#14 [internal function]: App\Http\Controllers\Api\OrganizationUnitController->{closure:App\Http\Controllers\Api\OrganizationUnitController::members():186}()
#15 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Collections/Arr.php(786): array_map()
#16 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Collections/Collection.php(814): Illuminate\Support\Arr::map()
#17 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Collection.php(418): Illuminate\Support\Collection->map()
#18 /home/gg/dev/hrm-laravel-base/app/Http/Controllers/Api/OrganizationUnitController.php(186): Illuminate\Database\Eloquent\Collection->map()
#19 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(46): App\Http\Controllers\Api\OrganizationUnitController->members()
#20 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch()
#21 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#22 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#23 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}()
#24 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#25 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle()
#26 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#27 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle()
#28 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#29 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then()
#30 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack()
#31 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute()
#32 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute()
#33 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch()
#34 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}()
#35 /home/gg/dev/hrm-laravel-base/vendor/livewire/livewire/src/Features/SupportDisablingBackButtonCache/DisableBackButtonCacheMiddleware.php(19): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#36 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Livewire\Features\SupportDisablingBackButtonCache\DisableBackButtonCacheMiddleware->handle()
#37 /home/gg/dev/hrm-laravel-base/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(59): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#38 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Barryvdh\Debugbar\Middleware\InjectDebugbar->handle()
#39 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#40 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#41 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle()
#42 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#43 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#44 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle()
#45 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#46 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle()
#47 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#48 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle()
#49 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#50 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle()
#51 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#52 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle()
#53 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#54 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle()
#55 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#56 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle()
#57 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#58 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then()
#59 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter()
#60 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle()
#61 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call()
#62 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json()
#63 /home/gg/dev/hrm-laravel-base/tests/Feature/Api/Organization/OrganizationUnitApiTest.php(140): Illuminate\Foundation\Testing\TestCase->getJson()
#64 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(1656): Tests\Feature\OrganizationUnitApiTest->can_list_users_by_organization_unit()
#65 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(514): PHPUnit\Framework\TestCase->runTest()
#66 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#67 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run()
#68 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#69 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#70 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#71 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#72 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run()
#73 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/src/Kernel.php(103): PHPUnit\TextUI\Application->run()
#74 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(184): Pest\Kernel->handle()
#75 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(192): {closure:/home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest:18}()
#76 {main}

----------------------------------------------------------------------------------

SQLSTATE[HY000]: General error: 1 ambiguous column name: organization_id (Connection: sqlite, SQL: select "organization_units".*, "organization_user"."user_id" as "pivot_user_id", "organization_user"."organization_unit_id" as "pivot_organization_unit_id", "organization_user"."organization_id" as "pivot_organization_id", "organization_user"."position" as "pivot_position", "organization_user"."roles" as "pivot_roles", "organization_user"."permissions" as "pivot_permissions", "organization_user"."created_at" as "pivot_created_at", "organization_user"."updated_at" as "pivot_updated_at" from "organization_units" inner join "organization_user" on "organization_units"."id" = "organization_user"."organization_unit_id" where "organization_user"."user_id" = 1 and "organization_units"."deleted_at" is null and "organization_id" = 1)

  at tests/Feature/Api/Organization/OrganizationUnitApiTest.php:143
    139â–•         $response = $this->actingAs($admin)
    140â–•             ->getJson("/api/organizations/{$org->id}/units/{$dept->id}/members");
    141â–•         // dd($response);
    142â–• 
  âžœ 143â–•         $response->assertStatus(200)
    144â–•             ->assertJsonCount(2, 'data'); // Should return both direct and nested members
    145â–•     }
    146â–• 
    147â–•     #[Test]

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\OrganizationUnitApiTest > cannot createâ€¦   TypeError   
  Illuminate\Foundation\Testing\TestCase::actingAs(): Argument #1 ($user) must be of type Illuminate\Contracts\Auth\Authenticatable, null given, called in /home/gg/dev/hrm-laravel-base/tests/Feature/Api/Organization/OrganizationUnitApiTest.php on line 152

  at tests/Feature/Api/Organization/OrganizationUnitApiTest.php:152
    148â–•     public function cannot_create_organization_unit_as_non_admin()
    149â–•     {
    150â–•         [$organization, $regularUser] = $this->createOrganizationWithUser(roles: ['user']);
    151â–• 
  âžœ 152â–•         $response = $this->actingAs($regularUser)
    153â–•             ->postJson("/api/organizations/{$organization->id}/units", [
    154â–•                 'name' => 'Support Team',
    155â–•                 'type' => 'team'
    156â–•             ]);

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\DashboardTest > it shows dashboard for usersâ€¦  Error   
  Call to a member function organizations() on null

  at app/Models/Traits/BelongsToOrganization.php:27
     23â–•         // Optional: Ensure the organization_id is automatically filled on creation
     24â–•         // This is a common practice to prevent tenancy leaks.
     25â–•         static::creating(function ($model) {
     26â–•             $user = auth()->user();
  âžœ  27â–•             $user_organization = $user->organizations()->first();
     28â–•             if ($user && $user_organization) {
     29â–•                 $model->organization_id = $user_organization->id;
     30â–•             }
     31â–•         });

  1   app/Models/Traits/BelongsToOrganization.php:27
      [2m+12 vendor frames [22m
  14  tests/Feature/DashboardTest.php:39

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\DashboardTest > it shows dashboard sections    Error   
  Call to a member function organizations() on null

  at app/Models/Traits/BelongsToOrganization.php:27
     23â–•         // Optional: Ensure the organization_id is automatically filled on creation
     24â–•         // This is a common practice to prevent tenancy leaks.
     25â–•         static::creating(function ($model) {
     26â–•             $user = auth()->user();
  âžœ  27â–•             $user_organization = $user->organizations()->first();
     28â–•             if ($user && $user_organization) {
     29â–•                 $model->organization_id = $user_organization->id;
     30â–•             }
     31â–•         });

  1   app/Models/Traits/BelongsToOrganization.php:27
      [2m+12 vendor frames [22m
  14  tests/Feature/DashboardTest.php:59

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\DashboardTest > it shows store inventory sumâ€¦  Error   
  Call to a member function organizations() on null

  at app/Models/Traits/BelongsToOrganization.php:27
     23â–•         // Optional: Ensure the organization_id is automatically filled on creation
     24â–•         // This is a common practice to prevent tenancy leaks.
     25â–•         static::creating(function ($model) {
     26â–•             $user = auth()->user();
  âžœ  27â–•             $user_organization = $user->organizations()->first();
     28â–•             if ($user && $user_organization) {
     29â–•                 $model->organization_id = $user_organization->id;
     30â–•             }
     31â–•         });

  1   app/Models/Traits/BelongsToOrganization.php:27
      [2m+12 vendor frames [22m
  14  tests/Feature/DashboardTest.php:81

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\DashboardTest > it shows low stock alerts      Error   
  Call to a member function organizations() on null

  at app/Models/Traits/BelongsToOrganization.php:27
     23â–•         // Optional: Ensure the organization_id is automatically filled on creation
     24â–•         // This is a common practice to prevent tenancy leaks.
     25â–•         static::creating(function ($model) {
     26â–•             $user = auth()->user();
  âžœ  27â–•             $user_organization = $user->organizations()->first();
     28â–•             if ($user && $user_organization) {
     29â–•                 $model->organization_id = $user_organization->id;
     30â–•             }
     31â–•         });

  1   app/Models/Traits/BelongsToOrganization.php:27
      [2m+12 vendor frames [22m
  14  tests/Feature/DashboardTest.php:109

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\DashboardTest > it shows recent transactions   Error   
  Call to a member function organizations() on null

  at app/Models/Traits/BelongsToOrganization.php:27
     23â–•         // Optional: Ensure the organization_id is automatically filled on creation
     24â–•         // This is a common practice to prevent tenancy leaks.
     25â–•         static::creating(function ($model) {
     26â–•             $user = auth()->user();
  âžœ  27â–•             $user_organization = $user->organizations()->first();
     28â–•             if ($user && $user_organization) {
     29â–•                 $model->organization_id = $user_organization->id;
     30â–•             }
     31â–•         });

  1   app/Models/Traits/BelongsToOrganization.php:27
      [2m+12 vendor frames [22m
  14  tests/Feature/DashboardTest.php:146

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\DashboardTest > it shows quick action buttonâ€¦  Error   
  Call to a member function organizations() on null

  at app/Models/Traits/BelongsToOrganization.php:27
     23â–•         // Optional: Ensure the organization_id is automatically filled on creation
     24â–•         // This is a common practice to prevent tenancy leaks.
     25â–•         static::creating(function ($model) {
     26â–•             $user = auth()->user();
  âžœ  27â–•             $user_organization = $user->organizations()->first();
     28â–•             if ($user && $user_organization) {
     29â–•                 $model->organization_id = $user_organization->id;
     30â–•             }
     31â–•         });

  1   app/Models/Traits/BelongsToOrganization.php:27
      [2m+12 vendor frames [22m
  14  tests/Feature/DashboardTest.php:173

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\DashboardTest > it shows stats cards           Error   
  Call to a member function organizations() on null

  at app/Models/Traits/BelongsToOrganization.php:27
     23â–•         // Optional: Ensure the organization_id is automatically filled on creation
     24â–•         // This is a common practice to prevent tenancy leaks.
     25â–•         static::creating(function ($model) {
     26â–•             $user = auth()->user();
  âžœ  27â–•             $user_organization = $user->organizations()->first();
     28â–•             if ($user && $user_organization) {
     29â–•                 $model->organization_id = $user_organization->id;
     30â–•             }
     31â–•         });

  1   app/Models/Traits/BelongsToOrganization.php:27
      [2m+12 vendor frames [22m
  14  tests/Feature/DashboardTest.php:197

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\DashboardTest > it shows empty state for noâ€¦   Error   
  Call to a member function organizations() on null

  at app/Models/Traits/BelongsToOrganization.php:27
     23â–•         // Optional: Ensure the organization_id is automatically filled on creation
     24â–•         // This is a common practice to prevent tenancy leaks.
     25â–•         static::creating(function ($model) {
     26â–•             $user = auth()->user();
  âžœ  27â–•             $user_organization = $user->organizations()->first();
     28â–•             if ($user && $user_organization) {
     29â–•                 $model->organization_id = $user_organization->id;
     30â–•             }
     31â–•         });

  1   app/Models/Traits/BelongsToOrganization.php:27
      [2m+12 vendor frames [22m
  14  tests/Feature/DashboardTest.php:223

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\DashboardTest > it shows all stocked messageâ€¦  Error   
  Call to a member function organizations() on null

  at app/Models/Traits/BelongsToOrganization.php:27
     23â–•         // Optional: Ensure the organization_id is automatically filled on creation
     24â–•         // This is a common practice to prevent tenancy leaks.
     25â–•         static::creating(function ($model) {
     26â–•             $user = auth()->user();
  âžœ  27â–•             $user_organization = $user->organizations()->first();
     28â–•             if ($user && $user_organization) {
     29â–•                 $model->organization_id = $user_organization->id;
     30â–•             }
     31â–•         });

  1   app/Models/Traits/BelongsToOrganization.php:27
      [2m+12 vendor frames [22m
  14  tests/Feature/DashboardTest.php:249

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\DashboardTest > it shows store with item couâ€¦  Error   
  Call to a member function organizations() on null

  at app/Models/Traits/BelongsToOrganization.php:27
     23â–•         // Optional: Ensure the organization_id is automatically filled on creation
     24â–•         // This is a common practice to prevent tenancy leaks.
     25â–•         static::creating(function ($model) {
     26â–•             $user = auth()->user();
  âžœ  27â–•             $user_organization = $user->organizations()->first();
     28â–•             if ($user && $user_organization) {
     29â–•                 $model->organization_id = $user_organization->id;
     30â–•             }
     31â–•         });

  1   app/Models/Traits/BelongsToOrganization.php:27
      [2m+12 vendor frames [22m
  14  tests/Feature/DashboardTest.php:284

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\Inventory\ItemTest > it returns 403 for unauthorizeâ€¦   
  Expected response status code [403] but received 404.
Failed asserting that 404 is identical to 403.

  at tests/Feature/Inventory/ItemTest.php:299
    295â–•         // User from Org A tries to access Org B's item availability
    296â–•         $response = $this->actingAs($setupA['user'])
    297â–•             ->getJson("/api/inventory/items/{$itemB->id}/availability");
    298â–• 
  âžœ 299â–•         $response->assertStatus(403);
    300â–•     }
    301â–• 
    302â–•     #[Test]
    303â–•     public function it_handles_item_with_no_stores()

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\Inventory\PermissionTest > user cannot access otherâ€¦   
  Expected response status code [403] but received 200.
Failed asserting that 200 is identical to 403.

  at tests/Feature/Inventory/PermissionTest.php:90
     86â–• 
     87â–•         // User from Org A tries to access Org B's store
     88â–•         $this->actingAs($setupA['user'])
     89â–•             ->getJson("/api/inventory/stores/{$storeB->id}")
  âžœ  90â–•             ->assertStatus(403);
     91â–•     }
     92â–• }
     93â–•

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\Livewire\Accounting\JournalEntriesTest > it createsâ€¦   
  Failed asserting that a row in the table [journal_entries] matches the attributes {
    "entry_date": "2025-01-01",
    "description": "Test entry",
    "status": "posted"
}.

The table is empty.

  at tests/Feature/Livewire/Accounting/JournalEntriesTest.php:50
     46â–•             ->set('transactions.1.credit', 500);
     47â–• 
     48â–•         $component->call('createEntry');
     49â–• 
  âžœ  50â–•         $this->assertDatabaseHas('journal_entries', [
     51â–•             'entry_date' => '2025-01-01',
     52â–•             'description' => 'Test entry',
     53â–•             'status' => 'posted',
     54â–•         ]);

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\Livewire\Organization\OrganizationListTest > it shoâ€¦   
  Expected: <div wire:snapshot="" wire:effects="" wire:id="eSQURcc7zxOPq0etRY4O">\n
      <!-- Header with Search and Actions -->\n
      <div class="flex flex-col sm:flex-row justify-between items-center mb-6 space-y-4 sm:space-y-0">\n
  ... (103 more lines)

  To contain: No organizations found

  at vendor/livewire/livewire/src/Features/SupportTesting/MakesAssertions.php:14
     10â–• {
     11â–•     function assertSee($values, $escape = true, $stripInitialData = true)
     12â–•     {
     13â–•         foreach (Arr::wrap($values) as $value) {
  âžœ  14â–•             PHPUnit::assertStringContainsString(
     15â–•                 $escape ? e($value): $value,
     16â–•                 $this->html($stripInitialData)
     17â–•             );
     18â–•         }

      [2m+1 vendor frames [22m
  2   tests/Feature/Livewire/Organization/OrganizationListTest.php:148

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  UserPlacementTest > it can unassign a user by dropping them ontoâ€¦    
  Failed asserting that a row in the table [organization_user] matches the attributes {
    "user_id": 2,
    "organization_id": 2,
    "organization_unit_id": null
}.

Found similar results: [
    {
        "user_id": 2,
        "organization_id": 2,
        "organization_unit_id": 1
    },
    {
        "user_id": 2,
        "organization_id": 1,
        "organization_unit_id": null
    }
].

  at tests/Feature/Livewire/Organization/UserPlacementTest.php:64
     60â–•         Livewire::test(UserPlacement::class, ['organizationId' => $organization->id])
     61â–•             ->call('assignUserToUnit', $user->id, null);
     62â–• 
     63â–•         // Assert
  âžœ  64â–•         $this->assertDatabaseHas('organization_user', [
     65â–•             'user_id' => $user->id,
     66â–•             'organization_id' => $organization->id,
     67â–•             'organization_unit_id' => null
     68â–•         ]);

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\MultiStepSetupWizardTest > it shows accounting setuâ€¦   
  Expected: <!DOCTYPE html>\n
  <html lang="en">\n
  \n
  ... (389 more lines)

  To contain: Accounting Setup

  at tests/Feature/MultiStepSetupWizardTest.php:133
    129â–•             $response = $this->followRedirects($response);
    130â–•         }
    131â–• 
    132â–•         $response->assertStatus(200)
  âžœ 133â–•             ->assertSee('Accounting Setup')
    134â–•             ->assertSee('Step 3 of 3');
    135â–•     }
    136â–•     #[Test]
    137â–•     public function it_can_setup_chart_of_accounts_and_complete_wizard()

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Feature\SetupWizardTest > it assigns admin roleâ€¦   TypeError   
  Illuminate\Foundation\Testing\TestCase::actingAs(): Argument #1 ($user) must be of type Illuminate\Contracts\Auth\Authenticatable, null given, called in /home/gg/dev/hrm-laravel-base/tests/Feature/SetupWizardTest.php on line 80

  at tests/Feature/SetupWizardTest.php:80
     76â–•     public function it_assigns_admin_role_to_creator()
     77â–•     {
     78â–•         // dd('$user');
     79â–•         $user = $this->user; //User::factory()->create();
  âžœ  80â–•         $this->actingAs($user)
     81â–•             ->post('/setup/organization', [
     82â–•                 'name' => 'Test Org',
     83â–•             ]);
     84â–•


  Tests:    21 failed, 4 skipped, 219 passed (743 assertions)
  Duration: 13.10s

