
   FAIL  Tests\Unit\Accounting\AccountTypeValidationTest
  ✓ it allows debit to asset accounts                                    0.61s  
  ✓ it allows debit to expense accounts                                  0.06s  
  ⨯ it throws exception when debiting liability account                  0.06s  
  ✓ it allows credit to liability accounts                               0.04s  
  ✓ it allows credit to revenue accounts                                 0.05s  
  ⨯ it throws exception when crediting asset account                     0.04s  
  ⨯ it validates account types during transaction posting                0.04s  

   PASS  Tests\Unit\Accounting\BalanceSheetTest
  ✓ it generates balance sheet with no transactions                      0.07s  
  ✓ it generates balanced balance sheet                                  0.04s  
  ✓ it includes retained earnings from income statement                  0.05s  

   PASS  Tests\Unit\Accounting\CashPaymentServiceTest
  ✓ cash payment service creates payment with journal entry              0.03s  
  ✓ cash payment service validates amount is positive                    0.02s  
  ✓ cash payment service generates sequential voucher numbers            0.03s  
  ✓ cash payment service validates account ownership                     0.02s  
  ✓ cash payment service validates sufficient cash balance               0.02s  

   PASS  Tests\Unit\Accounting\CashReceiptServiceTest
  ✓ cash receipt service creates receipt with journal entry              0.03s  
  ✓ cash receipt service validates amount is positive                    0.02s  
  ✓ cash receipt service generates sequential receipt numbers            0.03s  
  ✓ cash receipt service validates account ownership                     0.02s  

   PASS  Tests\Unit\Accounting\ChartOfAccountTest
  ✓ it has a code name and type                                          0.03s  
  ✓ it can scope accounts by type                                        0.02s  
  ✓ account code must be unique                                          0.03s  
  ✓ it can calculate its current balance                                 0.02s  

   PASS  Tests\Unit\Accounting\DimensionReportTest
  ✓ example                                                              0.06s  

   PASS  Tests\Unit\Accounting\FinancialReportsTest
  ✓ example                                                              0.03s  

   PASS  Tests\Unit\Accounting\IncomeStatementTest
  ✓ it generates income statement with no transactions                   0.02s  
  ✓ it generates income statement with revenue and expenses              0.03s  
  ✓ it excludes transactions outside date range                          0.03s  

   PASS  Tests\Unit\Accounting\InvalidAccountTypeExceptionTest
  ✓ it provides detailed error message                                   0.02s  
  ✓ it provides contextual information                                   0.03s  
  ✓ it allows custom message                                             0.02s  

   PASS  Tests\Unit\Accounting\JournalEntryFactoryTest
  ✓ it can create a journal entry                                        0.03s  
  ✓ it can create a draft journal entry                                  0.02s  
  ✓ it can create a posted journal entry                                 0.02s  
  ✓ it can create journal entry with specific approver                   0.02s  

   PASS  Tests\Unit\Accounting\JournalEntryTest
  ✓ it can create a journal entry                                        0.03s  
  ✓ it can post a balanced journal entry                                 0.03s  
  ✓ it prevents posting unbalanced journal entries                       0.02s  

   PASS  Tests\Unit\Accounting\LedgerEntryTest
  ✓ it belongs to a chart of account                                     0.02s  
  ✓ it has a debit or credit type                                        0.02s  
  ✓ it can be linked to a transaction via polymorphic relation           0.02s  
  ✓ it can be tagged with dimensions                                     0.03s  
  ✓ it must have a positive amount                                       0.02s  

   PASS  Tests\Unit\Accounting\TrialBalanceTest
  ✓ it generates trial balance with zero entries                         0.03s  
  ✓ it generates trial balance with balanced entries                     0.02s  
  ✓ it shows account balances in trial balance                           0.02s  

   PASS  Tests\Unit\Accounting\VoucherServiceTest
  ✓ voucher service creates voucher with required data                   0.02s  
  ✓ voucher service generates sequential voucher numbers                 0.02s  
  ✓ voucher service validates amount is positive                         0.02s  
  ✓ voucher service validates voucher type                               0.02s  
  ✓ voucher service can post voucher                                     0.02s  
  ✓ voucher service updates voucher                                      0.02s  
  ✓ voucher service handles posting posted voucher                       0.02s  

   PASS  Tests\Unit\Database\HRMSchemaTest
  ✓ it has job_positions table with correct columns                      0.02s  
  ✓ it has shifts table with correct columns                             0.02s  
  ✓ it has employees table with position and shift foreign keys          0.02s  
  ✓ it has foreign key constraints                                       0.01s  

   PASS  Tests\Unit\Models\Inventory\InventoryTransactionTest
  ✓ example                                                              0.02s  

   PASS  Tests\Unit\Models\Inventory\ItemTest
  ✓ example                                                              0.02s  

   PASS  Tests\Unit\Models\Inventory\StoreTest
  ✓ example                                                              0.02s  

   PASS  Tests\Unit\Models\JobPositionTest
  ✓ it can create a job position                                         0.02s  
  ✓ it belongs to an organization unit                                   0.02s  
  ✓ it has many employees                                                0.02s  
  ✓ it has active scope                                                  0.02s  
  ✓ it has search scope                                                  0.02s  

   PASS  Tests\Unit\Models\ShiftTest
  ✓ it can create a shift                                                0.03s  
  ✓ it calculates working hours correctly                                0.02s  
  ✓ it handles overnight shifts                                          0.02s  
  ✓ it has many employees                                                0.02s  
  ✓ it has active scope                                                  0.02s  
  ✓ it validates days of week format                                     0.02s  

   PASS  Tests\Unit\AccountingReportServiceTest
  ✓ it generates a correct trial balance                                 0.03s  
  ✓ it generates a correct balance sheet                                 0.03s  

   PASS  Tests\Unit\Accounting\AccountingServiceTest
  ✓ it throws an exception for unbalanced transactions                   0.02s  
  ✓ it successfully posts a balanced transaction and creates ledger ent… 0.02s  
  ✓ it can handle complex but balanced transactions                      0.02s  

   PASS  Tests\Unit\Services\InventoryServiceTest
  ✓ it can create a store                                                0.04s  
  ✓ it can update store inventory                                        0.03s  
  ✓ it can update store inventory with min max stock                     0.03s  
  ✓ it can adjust store inventory                                        0.03s  
  ✓ it can create and finalize transaction                               0.03s  
  ✓ it can cancel transaction                                            0.03s  
  ✓ it can get store stock levels                                        0.03s  
  ✓ it can get item availability                                         0.03s  
  ✓ it prevents modifying finalized transaction                          0.03s  
  ✓ it prevents finalizing transaction with no items                     0.04s  
  ✓ it prevents cancelling finalized transaction                         0.03s  
  ✓ it calculates low stock correctly                                    0.03s  
  ✓ it calculates overstock correctly                                    0.03s  

   PASS  Tests\Unit\Services\SequenceServiceTest
  ✓ it generates sequential codes                                        0.02s  
  ✓ it handles concurrent requests safely                                0.01s  

   PASS  Tests\Unit\Teams\CreateTeamTest
  ✓ teams can be created                                                 0.04s  

   PASS  Tests\Unit\Teams\DeleteTeamTest
  ✓ teams can be deleted                                                 0.03s  
  ✓ personal teams cant be deleted                                       0.03s  

   PASS  Tests\Unit\Teams\InviteTeamMemberTest
  ✓ team members can be invited to team                                  0.06s  
  ✓ team member invitations can be cancelled                             0.05s  

   PASS  Tests\Unit\Teams\LeaveTeamTest
  ✓ users can leave teams                                                0.04s  
  ✓ team owners cant leave their own team                                0.04s  

   PASS  Tests\Unit\Teams\RemoveTeamMemberTest
  ✓ team members can be removed from teams                               0.05s  
  ✓ only team owner can remove team members                              0.04s  

   PASS  Tests\Unit\Teams\UpdateTeamMemberRoleTest
  ✓ team member roles can be updated                                     0.06s  
  ✓ only team owner can update team member roles                         0.05s  

   PASS  Tests\Unit\Teams\UpdateTeamNameTest
  ✓ team names can be updated                                            0.03s  

   PASS  Tests\Unit\base\ApiTokenPermissionsTest
  ✓ api token permissions can be updated                                 0.06s  

   PASS  Tests\Unit\base\AuthenticationTest
  ✓ login screen can be rendered                                         0.02s  
  ✓ users can authenticate using the login screen                        0.02s  
  ✓ users cannot authenticate with invalid password                      0.02s  

   PASS  Tests\Unit\base\BrowserSessionsTest
  ✓ other browser sessions can be logged out                             0.04s  

   PASS  Tests\Unit\base\CreateApiTokenTest
  ✓ api tokens can be created                                            0.04s  

   PASS  Tests\Unit\base\DeleteAccountTest
  ✓ user accounts can be deleted                                         0.03s  
  ✓ correct password must be provided before account can be deleted      0.03s  

   PASS  Tests\Unit\base\DeleteApiTokenTest
  ✓ api tokens can be deleted                                            0.05s  

   WARN  Tests\Unit\base\EmailVerificationTest
  - email verification screen can be rendered → Email verification not…  0.02s  
  - email can be verified → Email verification not enabled.              0.02s  
  - email can not verified with invalid hash → Email verification not e… 0.01s  

   PASS  Tests\Unit\base\PasswordConfirmationTest
  ✓ confirm password screen can be rendered                              0.02s  
  ✓ password can be confirmed                                            0.02s  
  ✓ password is not confirmed with invalid password                      0.22s  

   PASS  Tests\Unit\base\PasswordResetTest
  ✓ reset password link screen can be rendered                           0.03s  
  ✓ reset password link can be requested                                 0.23s  
  ✓ reset password screen can be rendered                                0.24s  
  ✓ password can be reset with valid token                               0.24s  

   PASS  Tests\Unit\base\ProfileInformationTest
  ✓ current profile information is available                             0.04s  
  ✓ profile information can be updated                                   0.03s  

   WARN  Tests\Unit\base\RegistrationTest
  ✓ registration screen can be rendered                                  0.02s  
  - registration screen cannot be rendered if support is disabled → Reg… 0.01s  
  ✓ new users can register                                               0.02s  

   PASS  Tests\Unit\base\TwoFactorAuthenticationSettingsTest
  ✓ two factor authentication can be enabled                             0.05s  
  ✓ recovery codes can be regenerated                                    0.10s  
  ✓ two factor authentication can be disabled                            0.06s  

   PASS  Tests\Unit\base\UpdatePasswordTest
  ✓ password can be updated                                              0.03s  
  ✓ current password must be correct                                     0.03s  
  ✓ new passwords must match                                             0.03s  

   PASS  Tests\Feature\Accounting\CashPaymentTest
  ✓ cash payment can be created with required fields                     0.02s  
  ✓ cash payment belongs to organization                                 0.02s  
  ✓ cash payment belongs to cash account                                 0.02s  
  ✓ cash payment belongs to debit account                                0.02s  
  ✓ cash payment uses soft deletes                                       0.02s  
  ✓ cash payment casts amount as decimal                                 0.02s  
  ✓ cash payment casts date properly                                     0.02s  

   PASS  Tests\Feature\Accounting\CashReceiptTest
  ✓ cash receipt can be created with required fields                     0.02s  
  ✓ cash receipt belongs to organization                                 0.02s  
  ✓ cash receipt belongs to cash account                                 0.02s  
  ✓ cash receipt belongs to credit account                               0.02s  
  ✓ cash receipt uses soft deletes                                       0.02s  
  ✓ cash receipt casts amount as decimal                                 0.02s  
  ✓ cash receipt casts date properly                                     0.02s  

   PASS  Tests\Feature\Accounting\FinancialYearTest
  ✓ user can view financial years index                                  0.04s  
  ✓ user can create financial year                                       0.02s  
  ✓ user can store financial year                                        0.02s  
  ✓ user can edit financial year                                         0.04s  
  ✓ user can update financial year                                       0.02s  
  ✓ user can set opening balances                                        0.03s  
  ✓ user can save opening balances                                       0.02s  
  ✓ financial year can be activated                                      0.02s  
  ✓ financial year can be locked                                         0.02s  
  ✓ financial year can be unlocked                                       0.03s  
  ✓ financial year service can close financial year                      0.03s  
  ✓ financial year service can carry forward balances                    0.02s  
  ✓ financial year validation works correctly                            0.02s  
  ✓ user cannot delete active financial year                             0.02s  
  ✓ user can delete draft financial year                                 0.02s  

   PASS  Tests\Feature\Accounting\SpecializedVoucherTest
  ✓ sales voucher can be created with line items                         0.04s  
  ✓ purchase voucher can be created with line items                      0.02s  
  ✓ salary voucher can be created with deductions                        0.03s  
  ✓ expense voucher can be created                                       0.02s  
  ✓ sales voucher requires customer                                      0.02s  
  ✓ purchase voucher requires vendor                                     0.02s  
  ✓ salary voucher requires employee and valid amount                    0.02s  
  ✓ expense voucher requires account and valid amount                    0.02s  
  ✓ voucher reference numbers are sequential                             0.03s  
  ✓ vouchers maintain double entry bookkeeping                           0.02s  

   PASS  Tests\Feature\Accounting\VoucherTest
  ✓ voucher can be created with required fields                          0.02s  
  ✓ voucher belongs to organization                                      0.02s  
  ✓ voucher belongs to creator                                           0.02s  
  ✓ voucher belongs to updater                                           0.02s  
  ✓ voucher uses soft deletes                                            0.02s  
  ✓ voucher casts amount as decimal                                      0.02s  
  ✓ voucher casts date properly                                          0.02s  
  ✓ voucher can have different types                                     0.03s  
  ✓ voucher can be drafted                                               0.02s  
  ✓ voucher can be posted                                                0.02s  
  ✓ voucher generates sequential numbers                                 0.02s  

   PASS  Tests\Feature\AdvanceReportServiceTest
  ✓ can generate employee statement for all employees                    0.03s  
  ✓ can generate employee statement for specific employee                0.03s  
  ✓ can generate aging analysis                                          0.03s  
  ✓ can generate monthly summary                                         0.02s  
  ✓ can generate department report                                       0.02s  
  ✓ can generate advance vs salary analysis                              0.02s  
  ✓ can generate outstanding advances report                             0.03s  
  ✓ can get comprehensive advance analytics                              0.03s  
  ✓ employee statement respects date filters                             0.02s  
  ✓ monthly summary returns correct number of months                     0.06s  
  ✓ department report handles employees without departments              0.03s  

   PASS  Tests\Feature\AdvanceReportsLivewireTest
  ✓ advance reports page renders successfully                            0.05s  
  ✓ livewire component loads with default values                         0.03s  
  ✓ can switch between report types                                      0.04s  
  ✓ can filter by employee                                               0.04s  
  ✓ can filter by date range                                             0.04s  
  ✓ report data is computed correctly                                    0.03s  
  ✓ employees list is available for filtering                            0.02s  
  ✓ departments list is available for filtering                          0.02s  
  ✓ reset filters works correctly                                        0.05s  
  ✓ report types list is available                                       0.03s  
  ✓ component respects organization scoping                              0.02s  
  ✓ date filters are properly initialized                                0.03s  

   PASS  Tests\Feature\Api\Accounting\ChartOfAccountsApiTest
  ✓ it can list chart of accounts                                        0.03s  
  ✓ it can create a chart of account                                     0.02s  
  ✓ it validates account creation                                        0.02s  
  ✓ it can show a specific account                                       0.02s  
  ✓ it returns 404 for nonexistent account                               0.03s  

   PASS  Tests\Feature\Api\Accounting\FinancialReportsApiTest
  ✓ it can generate trial balance                                        0.03s  
  ✓ it can generate balance sheet                                        0.03s  
  ✓ it can generate income statement                                     0.04s  
  ✓ it validates income statement date range                             0.05s  
  ✓ it rejects end date before start date                                0.03s  

   PASS  Tests\Feature\Api\Accounting\JournalEntriesApiTest
  ✓ it can create a journal entry                                        0.04s  
  ✓ it validates journal entry balances                                  0.03s  
  ✓ it can post a journal entry                                          0.03s  

   PASS  Tests\Feature\OrganizationApiTest
  ✓ can create organization                                              0.03s  
  ✓ debug factory output                                                 0.02s  
  ✓ verify organization factory works                                    0.03s  
  ✓ can list organizations                                               0.03s  
  ✓ can show organization                                                0.03s  
  ✓ can update organization                                              0.02s  
  ✓ can delete organization                                              0.03s  
  ✓ guests cannot access organizations                                   0.02s  
  ✓ name is required for creation                                        0.02s  
  ✓ name must be unique                                                  0.02s  
  ✓ user can view their organizations                                    0.02s  
  ✓ organization admin can list members                                  0.03s  
  ✓ admin can invite new members                                         0.03s  
  ✓ cannot invite existing member                                        0.03s  
  ✓ non admin cannot invite members                                      0.02s  

   PASS  Tests\Feature\OrganizationUnitApiTest
  ✓ can create organization unit                                         0.03s  
  ✓ can create nested unit                                               0.03s  
  ✓ can get unit hierarchy                                               0.03s  
  ✓ can assign user to unit                                              0.03s  
  ✓ can list users by organization unit                                  0.03s  
  ✓ cannot create organization unit as non admin                         0.03s  
  ✓ cannot assign user as non admin                                      0.03s  
  ✓ cannot create unit with invalid data                                 0.02s  
  ✓ cannot assign non existent user to unit                              0.03s  
  ✓ cannot assign user not in organization                               0.03s  
  ✓ cannot get hierarchy for non existent unit                           0.02s  
  ✓ can get hierarchy for unit with no children                          0.02s  

   PASS  Tests\Feature\Portal\AttendanceSyncTest
  ✓ can view attendance dashboard                                        0.05s  
  ✓ can filter attendance by date range                                  0.04s  
  ✓ can identify attendance exceptions                                   0.05s  
  ✓ can regularize missed punch                                          0.03s  
  ✓ attendance data integrates with payroll                              0.06s  
  ✓ employee can clock in and out                                        0.04s  
  ✓ can calculate attendance summary                                     0.05s  
  ✓ biometric attendance sync                                            0.03s  

   FAIL  Tests\Feature\DashboardTest
  ✓ it redirects to setup for users without organization                 0.04s  
  ⨯ it shows dashboard for users with organization                       0.03s  
  ⨯ it shows dashboard sections                                          0.03s  
  ✓ it shows store inventory summary                                     0.04s  
  ⨯ it shows low stock alerts                                            0.03s  
  ✓ it shows recent transactions                                         0.10s  
  ⨯ it shows quick action buttons                                        0.04s  
  ✓ it shows stats cards                                                 0.05s  
  ✓ it shows empty state for no stores                                   0.04s  
  ✓ it shows all stocked message when no low stock                       0.04s  
  ✓ it shows store with item counts                                      0.04s  

   PASS  Tests\Feature\ExampleTest
  ✓ it returns a successful response                                     0.03s  

   FAIL  Tests\Feature\Feature\Accounting\BankAccountTest
  ✓ user can view bank accounts index                                    0.04s  
  ✓ user can create bank account                                         0.02s  
  ✓ bank account belongs to organization                                 0.02s  
  ⨯ bank account has chart of account relationship                       0.02s  
  ✓ bank account can have bank transactions                              0.02s  
  ✓ bank account scope active works correctly                            0.02s  
  ✓ bank account formatted balance returns correct format                0.02s  
  ✓ bank account type label returns correct label                        0.03s  
  ✓ bank account status label returns correct label                      0.02s  

   FAIL  Tests\Feature\Feature\Accounting\FixedAssetTest
  ✓ user can view fixed assets index                                     0.04s  
  ⨯ user can register a new fixed asset                                  0.03s  
  ✓ fixed asset calculates straight line depreciation correctly          0.02s  
  ✓ fixed asset calculates declining balance depreciation correctly      0.02s  
  ⨯ fixed asset calculates sum of years depreciation correctly           0.03s  
  ⨯ can post depreciation for asset                                      0.02s  
  ⨯ can dispose asset with gain                                          0.02s  
  ✓ can transfer asset between locations                                 0.02s  
  ⨯ can record asset maintenance                                         0.02s  
  ✓ asset knows when it is fully depreciated                             0.02s  
  ✓ asset knows when it can be depreciated                               0.02s  

   FAIL  Tests\Feature\Portal\EmployeeManagementTest
  ✓ can view employee list                                               0.06s  
  ✓ can view employee details                                            0.05s  
  ✓ can create employee                                                  0.04s  
  ✓ can update employee details                                          0.03s  
  ✓ can update biometric id                                              0.03s  
  ✓ employee belongs to organization unit                                0.04s  
  ✓ employee creation requires authentication                            0.04s  
  ✓ non hr users cannot create employees                                 0.04s  
  ✓ can search employees                                                 0.04s  
  ✓ can filter employees by department                                   0.04s  
  ⨯ employee attendance integration                                      0.05s  
  ⨯ employee leave balance calculation                                   0.05s  
  ✓ can create employee without user account                             0.04s  
  ✓ can grant system access to employee                                  0.04s  

   FAIL  Tests\Feature\HR\EmployeePositionShiftIntegrationTest
  ⨯ it assigns position and shift to employee during creation            0.03s  
  ✓ it loads employee with position and shift relationships              0.02s  
  ⨯ it prevents assigning inactive position to employee                  0.02s  
  ✓ it filters employees by position                                     0.02s  
  ✓ it filters employees by shift                                        0.03s  

   FAIL  Tests\Feature\HR\JobPositionControllerTest
  ✓ it displays job positions index                                      0.04s  
  ✓ it creates a job position                                            0.02s  
  ✓ it validates required fields on create                               0.02s  
  ✓ it updates a job position                                            0.02s  
  ⨯ it deletes a job position                                            0.03s  
  ✓ it searches job positions                                            0.03s  

   FAIL  Tests\Feature\HR\ShiftControllerTest
  ✓ it displays shifts index                                             0.04s  
  ✓ it creates a shift                                                   0.02s  
  ✓ it validates required fields on create                               0.02s  
  ⨯ it updates a shift                                                   0.02s  
  ⨯ it deletes a shift                                                   0.03s  

   FAIL  Tests\Feature\HrmDashboardControllerTest
  ✓ it displays hrm dashboard to authenticated users                     0.03s  
  ✓ it redirects guests to login page                                    0.02s  
  ✓ it passes hrm dashboard data to view                                 0.03s  
  ✓ it includes employee summary data                                    0.03s  
  ✓ it includes attendance overview data                                 0.04s  
  ✓ it includes leave management data                                    0.03s  
  ✓ it includes performance kpis data                                    0.03s  
  ✓ it includes recent activities data                                   0.03s  
  ✓ it includes upcoming events data                                     0.03s  
  ✓ it includes organization unit stats data                             0.03s  
  ✓ it includes training development data                                0.04s  
  ⨯ dashboard view contains expected hrm elements                        0.03s  
  ✓ it provides realistic hrm data values                                0.03s  
  ✓ recent activities are sorted by timestamp                            0.03s  
  ✓ upcoming events are sorted by date                                   0.03s  
  ✓ organization unit stats have consistent structure                    0.03s  
  ✓ it handles users with hrm permissions                                0.04s  
  ✓ it shows organization specific data                                  0.03s  

   PASS  Tests\Feature\Inventory\InventoryControllerTest
  ✓ it displays inventory dashboard                                      0.06s  
  ✓ it shows correct statistics on dashboard                             0.05s  
  ✓ it requires authentication for inventory dashboard                   0.04s  
  ✓ it includes todays transactions in stats                             0.05s  
  ✓ it handles empty inventory gracefully                                0.05s  

   PASS  Tests\Feature\Inventory\InventoryItemControllerTest
  ✓ it displays items index                                              0.05s  
  ✓ it filters items by search term                                      0.06s  
  ✓ it shows item creation form                                          0.05s  
  ✓ it stores new item with valid data                                   0.03s  
  ✓ it validates required fields when storing item                       0.03s  

   PASS  Tests\Feature\Inventory\InventoryReportControllerTest
  ✓ it displays reports dashboard                                        0.06s  
  ✓ it displays low stock report                                         0.05s  
  ✓ it filters low stock by store                                        0.07s  
  ✓ it displays stock movement report                                    0.05s  
  ✓ it filters movement report by date range                             0.06s  
  ✓ it displays stock levels report                                      0.06s  
  ✓ it filters stock levels by category                                  0.05s  
  ✓ it handles empty reports gracefully                                  0.08s  

   PASS  Tests\Feature\InventoryScopeTest
  ✓ it finds low stock items using scope                                 0.04s  
  ✓ it finds low stock items in specific store                           0.03s  
  ✓ it finds out of stock items using scope                              0.03s  
  ✓ store can retrieve its low stock items                               0.03s  
  ✓ store can retrieve its out of stock items                            0.03s  
  ✓ it calculates stock statistics for store                             0.03s  
  ✓ it properly categorizes stock levels                                 0.04s  

   PASS  Tests\Feature\Inventory\InventoryStockControllerTest
  ✓ it shows stock adjustment form                                       0.04s  
  ✓ it processes stock adjustment                                        0.04s  
  ✓ it shows stock count form                                            0.03s  
  ✓ it processes stock count                                             0.05s  
  ✓ it shows stock transfer form                                         0.03s  
  ✓ it processes stock transfer                                          0.05s  

   PASS  Tests\Feature\Inventory\InventoryStoreControllerTest
  ✓ it displays stores index                                             0.05s  
  ✓ it filters stores by search term                                     0.05s  
  ✓ it shows store creation form                                         0.04s  
  ✓ it stores new store with valid data                                  0.03s  
  ✓ it shows store detail page                                           0.05s  
  ✓ it updates store with valid data                                     0.03s  
  ✓ it deletes store without transactions or items                       0.04s  
  ✓ it prevents deletion of store with transactions                      0.04s  

   PASS  Tests\Feature\Inventory\InventoryTenancyTest
  ✓ it scopes items by organization                                      0.04s  
  ✓ it scopes stores by organization                                     0.04s  
  ✓ user cannot access other organizations inventory data                0.08s  
  ✓ it enforces organization isolation in controllers                    0.07s  

   PASS  Tests\Feature\Inventory\InventoryTransactionControllerTest
  ✓ it displays transactions index                                       0.06s  
  ✓ it shows transaction creation form                                   0.04s  
  ✓ it stores new transaction with items                                 0.05s  

   FAIL  Tests\Feature\Inventory\ItemTest
  ✓ it can create an item                                                0.03s  
  ✓ it can search items by name or sku                                   0.04s  
  ✓ it can filter items by category                                      0.04s  
  ✓ it can sort items                                                    0.04s  
  ✓ it returns only items from users organization                        0.05s  
  ✓ it can get item availability across stores                           0.04s  
  ✓ it shows low stock status correctly                                  0.04s  
  ⨯ it returns 403 for unauthorized access                               0.04s  
  ✓ it handles item with no stores                                       0.04s  

   FAIL  Tests\Feature\Inventory\PermissionTest
  ✓ inventory admin has all permissions                                  0.06s  
  ✓ store manager cannot delete stores                                   0.04s  
  ✓ inventory clerk cannot finalize transactions                         0.04s  
  ✓ auditor can only view inventory                                      0.04s  
  ⨯ user cannot access other organization inventory                      0.04s  

   PASS  Tests\Feature\Inventory\StoreTest
  ✓ it can create a store                                                0.05s  
  ✓ it can add items to store                                            0.04s  
  ✓ it can retrieve store with items                                     0.04s  
  ✓ it can update item quantity in store                                 0.04s  
  ✓ it can list all stores for organization                              0.04s  
  ✓ it can use organization scope                                        0.05s  
  ✓ it can use search scope                                              0.03s  
  ✓ it can use active scope                                              0.03s  

   PASS  Tests\Feature\Inventory\TransactionTest
  ✓ it can create draft transaction without items                        0.04s  
  ✓ it can create draft transaction with items                           0.04s  
  ✓ it can add items to empty draft transaction                          0.05s  
  ✓ it can add items to transaction with existing items                  0.05s  
  ✓ it can finalize transaction created without items after adding item… 0.05s  
  ✓ it can finalize transaction created with items                       0.05s  
  ✓ it cannot finalize empty transaction                                 0.04s  
  ✓ it cannot add items to finalized transaction                         0.06s  
  ✓ it can list transactions by status                                   0.07s  
  ✓ it can calculate transaction totals                                  0.05s  
  ✓ it cannot modify finalized transaction                               0.05s  
  ✓ it can calculate totals for empty transaction                        0.04s  

   PASS  Tests\Feature\Livewire\Accounting\CashPayments\CreateTest
  ✓ cash payment create component renders successfully                   0.03s  
  ✓ cash payment create component has required fields                    0.03s  
  ✓ cash payment create component loads cash and expense accounts        0.03s  
  ✓ cash payment create component validates required fields              0.06s  
  ✓ cash payment create component validates amount is positive           0.06s  
  ✓ cash payment create component creates payment successfully           0.09s  
  ✓ cash payment create component handles creation errors                0.06s  

   PASS  Tests\Feature\Livewire\Accounting\CashReceipts\CreateTest
  ✓ cash receipt create component renders successfully                   0.03s  
  ✓ cash receipt create component has required fields                    0.03s  
  ✓ cash receipt create component loads cash accounts                    0.03s  
  ✓ cash receipt create component validates required fields              0.07s  
  ✓ cash receipt create component validates amount is positive           0.07s  
  ✓ cash receipt create component creates receipt successfully           0.08s  
  ✓ cash receipt create component handles creation errors                0.06s  

   PASS  Tests\Feature\Livewire\Accounting\ChartOfAccountsTest
  ✓ chart of accounts page renders                                       0.03s  
  ✓ it displays a list of accounts                                       0.03s  
  ✓ it displays a list of chart of accounts                              0.04s  
  ✓ it can create a new chart of account record                          0.04s  
  ✓ it can update an existing chart of account record                    0.04s  

   FAIL  Tests\Feature\Livewire\Accounting\JournalEntriesTest
  ✓ it renders successfully                                              0.03s  
  ⨯ it creates a journal entry                                           0.06s  
  ✓ a journal entry requires balanced debits and credits                 0.07s  

   FAIL  Tests\Feature\Livewire\Accounting\Vouchers\CreateTest
  ✓ voucher create component renders successfully                        0.03s  
  ✓ voucher create component has required fields                         0.02s  
  ⨯ voucher create component loads chart of accounts                     0.02s  
  ✓ voucher create component validates required fields                   0.04s  
  ✓ voucher create component validates amount is positive                0.04s  
  ✓ voucher create component creates voucher successfully                0.05s  
  ✓ voucher create component handles creation errors                     0.04s  

   FAIL  Tests\Feature\Livewire\CashManagementDemoTest
  ✓ it renders the cash management demo component                        0.03s  
  ✓ it displays cash receipt and payment forms                           0.02s  
  ✓ it loads cash accounts for the organization                          0.02s  
  ✓ it can switch between receipt and payment modes                      0.03s  
  ✓ it validates receipt form data                                       0.03s  
  ✓ it validates payment form data                                       0.03s  
  ✓ it creates a cash receipt successfully                               0.05s  
  ⨯ it creates a cash payment successfully                               0.05s  
  ✓ it displays recent cash receipts and payments                        0.03s  
  ✓ it resets form after successful receipt creation                     0.06s  
  ⨯ it resets form after successful payment creation                     0.05s  

   PASS  Tests\Feature\Livewire\Organization\MemberManagerTest
  ✓ it can display a list of organization members                        0.03s  
  ✓ it can search for members by name or email                           0.04s  

   PASS  Tests\Feature\Livewire\Organization\OrganizationFormTest
  ✓ it shows create form                                                 0.03s  
  ✓ it shows edit form                                                   0.03s  
  ✓ it creates new organization                                          0.04s  
  ✓ it updates existing organization                                     0.04s  
  ✓ it validates required fields                                         0.03s  
  ✓ it validates unique name                                             0.03s  
  ✓ it closes modal                                                      0.03s  

   FAIL  Tests\Feature\Livewire\Organization\OrganizationListTest
  ✓ it shows organizations list                                          0.03s  
  ✓ it searches organizations by name                                    0.04s  
  ✓ it sorts organizations by name ascending                             0.04s  
  ✓ it sorts organizations by name descending                            0.05s  
  ✓ it sorts organizations by status                                     0.04s  
  ✓ it paginates organizations                                           0.05s  
  ⨯ it shows empty state when no organizations                           0.03s  

   FAIL  Tests\Feature\Livewire\Organization\OrganizationTreeTest
  ⨯ it can display the organization tree                                 0.04s  
  ⨯ an organization unit can be dragged and dropped to another parent    0.03s  
  ✓ an organizational unit cannot be dropped onto itself                 0.03s  
  ⨯ an organizational unit can be dropped as a root node                 0.03s  
  ✓ a parent cannot be dropped onto one of its descendants               0.03s  
  ⨯ a sibling can be dropped under another sibling                       0.03s  
  ⨯ an empty tree renders correctly                                      0.02s  
  ✓ it can handle a large number of units without crashing               0.10s  
  ✓ a dropped unit that does not exist does not cause an error           0.03s  

   FAIL  UserPlacementTest
  ✓ it can assign a user to a unit                                       0.04s  
  ⨯ it can unassign a user by dropping them onto the root                0.03s  

   PASS  Tests\Feature\Models\CustomerTest
  ✓ customer can be created with financial fields                        0.02s  
  ✓ customer belongs to organization                                     0.02s  
  ✓ customer uses soft deletes                                           0.03s  
  ✓ customer casts financial fields correctly                            0.02s  
  ✓ customer scope active works correctly                                0.02s  
  ✓ customer scope with balance works correctly                          0.02s  
  ✓ customer full address concatenates correctly                         0.02s  
  ✓ customer display name includes balance                               0.02s  

   FAIL  Tests\Feature\Models\FinancialManagementTest
  ✓ customer financial fields work correctly                             0.02s  
  ✓ customer relationships work correctly                                0.02s  
  ✓ customer soft deletes work                                           0.03s  
  ✓ customer scopes work correctly                                       0.02s  
  ✓ customer full address concatenates correctly                         0.02s  
  ✓ invoice can be created with all relationships                        0.02s  
  ✓ invoice status scopes work correctly                                 0.03s  
  ⨯ invoice amount due calculation works                                 0.03s  
  ✓ invoice overdue detection works                                      0.02s  
  ✓ payment can be created with relationships                            0.02s  
  ✓ payment status scopes work correctly                                 0.04s  
  ✓ payment fully applied calculation works                              0.03s  

   PASS  Tests\Feature\Models\InvoiceTest
  ✓ invoice can be created with required fields                          0.03s  
  ✓ invoice belongs to customer                                          0.02s  
  ✓ invoice belongs to vendor                                            0.02s  
  ✓ invoice uses soft deletes                                            0.02s  
  ✓ invoice casts amounts correctly                                      0.03s  
  ✓ invoice casts dates correctly                                        0.02s  
  ✓ invoice status scope works                                           0.03s  

   PASS  Tests\Feature\MultiStepSetupWizardTest
  ✓ it shows organization step for new users                             0.04s  
  ✓ it can store organization and proceed to store step                  0.03s  
  ✓ it shows store setup step after organization                         0.04s  
  ✓ it can create first store and proceed to accounting                  0.05s  
  ✓ it shows accounting setup step after store                           0.04s  

   FAIL  Tests\Feature\Organization\OrganizationDashboardTest
  ⨯ authenticated user can access organization dashboard                 0.03s  
  ⨯ dashboard displays correct organization metrics                      0.03s  
  ⨯ user can view organization structure                                 0.03s  
  ⨯ dashboard includes department distribution data                      0.04s  
  ⨯ analytics page displays trend data                                   0.02s  

   FAIL  Tests\Feature\Portal\OrganizationUserIntegrationTest
  ✓ organization user roles are properly cast                            0.03s  
  ✓ employee can access employee portal with employee role               0.05s  
  ⨯ manager can access both employee and manager portals                 0.05s  
  ✓ user without organization access denied                              0.04s  
  ✓ employee cannot access manager portal                                0.03s  
  ⨯ has role method works correctly                                      0.03s  
  ⨯ has any role method works correctly                                  0.03s  

   WARN  OrganizationUserPivotTest
  ! it can get all roles with the new pivot model → This test did not p… 0.02s  

   PASS  Tests\Feature\OutstandingStatementsBasicTest
  ✓ outstanding statements service basic functionality                   0.02s  

   FAIL  Tests\Feature\OutstandingStatementsTest
  ✓ can generate receivables aging report                                0.03s  
  ⨯ can generate payables aging report                                   0.02s  
  ✓ can get customer outstanding summary                                 0.02s  
  ✓ can get vendor outstanding summary                                   0.02s  
  ⨯ can generate comprehensive receivables statement with aging          0.03s  
  ⨯ can generate comprehensive payables statement with aging             0.02s  
  ⨯ can filter receivables statement by customer                         0.02s  
  ⨯ can filter payables statement by vendor                              0.03s  
  ⨯ can filter statements by date range                                  0.03s  
  ⨯ can export statement data                                            0.02s  
  ⨯ can get aging summary for dashboard                                  0.02s  
  ✓ respects organization isolation                                      0.02s  

   PASS  Tests\Feature\Payroll\EmployeeIncrementTest
  ✓ employee increment can be created                                    0.03s  
  ✓ employee increment can be approved                                   0.02s  
  ✓ employee increment can be implemented                                0.02s  
  ✓ increment calculation works correctly for percentage                 0.03s  
  ✓ increment calculation works correctly for fixed amount               0.02s  
  ✓ only approved increments can be implemented                          0.02s  

   PASS  Tests\Feature\Payroll\PayrollCalculationTest
  ✓ payroll calculation service calculates basic payroll correctly       0.03s  
  ✓ payroll calculation includes allowances correctly                    0.02s  
  ✓ payroll calculation includes deductions correctly                    0.02s  
  ✓ tax calculation works correctly                                      0.02s  
  ✓ effective basic salary considers increments                          0.03s  
  ✓ batch payroll processing works correctly                             0.03s  
  ✓ payroll summary generation works correctly                           0.03s  

   WARN  Tests\Feature\Portal\PayrollProcessingTest
  ! can calculate payroll with attendance → This test did not perform a… 0.02s  
  ! payroll includes correct deductions → This test did not perform any… 0.01s  
  ! can generate accounting journal entry → This test did not perform a… 0.02s  
  ! payslip generation → This test did not perform any assertions        0.01s  
  ! payroll uses correct chart of accounts → This test did not perform…  0.02s  

   FAIL  Tests\Feature\PdfGenerationTest
  ✓ payslip download should work correctly                               0.11s  
  ✓ payslip download should return pdf response                          0.07s  
  ✓ payslip pdf should have correct filename                             0.07s  
  ✓ trial balance download should return pdf response                    0.06s  
  ✓ trial balance pdf should have correct filename                       0.04s  
  ✓ income statement download should return pdf response                 0.05s  
  ✓ balance sheet download should return pdf response                    0.05s  
  ✓ low stock pdf download should return pdf response                    0.05s  
  ✓ stock levels pdf download should return pdf response                 0.05s  
  ⨯ movement pdf download should return pdf response                     0.02s  
  ✓ pdf generation should handle missing data gracefully                 0.02s  
  ✓ pdf generation should not exceed memory limits                       0.05s  

   FAIL  Tests\Feature\Portal\CompletePortalTest
  ✓ employee can access all portal features                              0.08s  
  ⨯ employee can clock in and out                                        0.03s  
  ✓ employee can apply for leave                                         0.05s  
  ⨯ manager can access manager portal                                    0.03s  
  ⨯ employee can view payslip details                                    0.04s  
  ⨯ employee cannot view other employee payslips                         0.03s  
  ✓ attendance records show correct summary                              0.05s  

   FAIL  Tests\Feature\Portal\EmployeePortalTest
  ✓ employee can access their portal dashboard                           0.05s  
  ✓ employee can view attendance page                                    0.04s  
  ✓ employee can filter attendance by month                              0.05s  
  ✓ employee can apply for leave                                         0.04s  
  ✓ employee can view leave page                                         0.04s  
  ✓ employee can view payslips page                                      0.04s  
  ✓ employee can view leave application form                             0.04s  
  ⨯ employee can clock in and out                                        0.03s  

   FAIL  Tests\Feature\Portal\ManagerPortalTest
  ⨯ manager can access their portal dashboard                            0.05s  
  ✓ manager can view team attendance page                                0.05s  
  ⨯ manager can approve leave requests                                   0.03s  
  ✓ manager can filter team attendance by date                           0.05s  
  ⨯ manager can generate team reports                                    0.03s  

   PASS  Tests\Feature\SetupChartOfAccountsTest
  ✓ it creates default chart of accounts                                 0.04s  
  ✓ it skips account creation if not requested                           0.03s  
  ✓ it creates organization unit for accounting department               0.03s  

   PASS  Tests\Feature\SetupStoreTest
  ✓ it creates first store for organization                              0.04s  
  ✓ it validates store creation                                          0.03s  
  ✓ it auto generates store code if not provided                         0.05s  

   FAIL  Tests\Feature\SetupWizardTest
  ✓ it shows setup wizard for new users                                  0.04s  
  ✓ it redirects to dashboard if organization exists                     0.03s  
  ✓ it can create organization through wizard                            0.03s  
  ✓ it validates organization creation                                   0.03s  
  ⨯ it assigns admin role to creator                                     0.04s  

   FAIL  Tests\Feature\TaxManagementTest
  ⨯ user can create tax rate                                             0.02s  
  ⨯ user can update tax rate                                             0.02s  
  ⨯ tax rate scope active works correctly                                0.02s  
  ✓ user can create tax jurisdiction                                     0.02s  
  ✓ user can create tax exemption                                        0.02s  
  ✓ tax exemption validity check works                                   0.02s  
  ⨯ tax calculation service calculates taxes correctly                   0.03s  
  ⨯ tax calculation service applies exemptions correctly                 0.02s  
  ⨯ tax calculation service handles compound taxes                       0.02s  
  ⨯ tax reporting service generates correct reports                      0.02s  
  ⨯ tax compliance service creates filings correctly                     0.02s  
  ✓ tax compliance service checks expiry dates                           0.02s  
  ✓ voucher tax integration works end-to-end                             0.02s  
  ⨯ tax calculations are properly scoped to organization                 0.02s  

   PASS  Tests\Feature\TenancyFeatureTest
  ✓ queries are automatically scoped to the authenticated users organiz… 0.05s  
  ✓ organization id is automatically set on creation                     0.04s  
  ✓ global scope can be bypassed for admin queries                       0.04s  

   PASS  Tests\Feature\VoucherSystemTest
  ✓ can create sales voucher                                             0.03s  
  ✓ can create purchase voucher                                          0.03s  
  ✓ can create salary voucher                                            0.03s  
  ✓ can create expense voucher                                           0.03s  
  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Accounting\AccountTypeValidationTest > it throws excep…   
  Failed asserting that exception of type "App\Exceptions\InvalidAccountTypeException" is thrown.

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Accounting\AccountTypeValidationTest > it throws excep…   
  Failed asserting that exception of type "App\Exceptions\InvalidAccountTypeException" is thrown.

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Accounting\AccountTypeValidationTest > it validates ac…   
  Failed asserting that exception of type "App\Exceptions\InvalidAccountTypeException" is thrown.

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\DashboardTest > it shows dashboard for users with o…   
  Expected response status code [200] but received 302.
Failed asserting that 302 is identical to 200.

  at tests/Feature/DashboardTest.php:56
     52▕ 
     53▕         $response = $this->actingAs($user)
     54▕             ->get('/dashboard');
     55▕ 
  ➜  56▕         $response->assertStatus(200)
     57▕             ->assertSee('Dashboard')
     58▕             ->assertSee($organization->name);
     59▕     }
     60▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\DashboardTest > it shows dashboard sections            
  Expected response status code [200] but received 302.
Failed asserting that 302 is identical to 200.

  at tests/Feature/DashboardTest.php:76
     72▕ 
     73▕         $response = $this->actingAs($user)
     74▕             ->get('/dashboard');
     75▕ 
  ➜  76▕         $response->assertStatus(200)
     77▕             ->assertSee('Stores Overview') // Actual section title
     78▕             ->assertSee('Low Stock Alerts') // Actual section title
     79▕             ->assertSee('Stores') // Stats card
     80▕             ->assertSee('Total Items') // Stats card

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\DashboardTest > it shows low stock alerts              
  Expected response status code [200] but received 302.
Failed asserting that 302 is identical to 200.

  at tests/Feature/DashboardTest.php:149
    145▕         // dd([$store->items]);
    146▕         $response = $this->actingAs($user)
    147▕             ->get('/dashboard');
    148▕         // dd($response);
  ➜ 149▕         $response->assertStatus(200)
    150▕             ->assertSee('Low Stock Alerts')
    151▕             ->assertSee($lowStockItem->name);
    152▕     }
    153▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\DashboardTest > it shows quick action buttons          
  Expected: <!DOCTYPE html>\n
  <html lang="en">\n
  \n
  ... (556 more lines)

  To contain: Add Store

  at tests/Feature/DashboardTest.php:190
    186▕         $response = $this->actingAs($user)
    187▕             ->get('/dashboard');
    188▕ 
    189▕         $response->assertStatus(200)
  ➜ 190▕             ->assertSee('Add Store')
    191▕             ->assertSee('New Transaction')
    192▕             ->assertSee('Add Item');
    193▕     }
    194▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Feature\Accounting\BankAccountTest…   QueryException   
  SQLSTATE[23000]: Integrity constraint violation: 19 FOREIGN KEY constraint failed (Connection: sqlite, SQL: insert into "chart_of_accounts" ("code", "name", "type", "description", "organization_id", "updated_at", "created_at") values (5085, rerum, equity, Ipsum labore nihil quo ut sint voluptates deleniti vero., 1, 2025-11-25 06:34:32, 2025-11-25 06:34:32))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:570
    566▕             $this->bindValues($statement, $this->prepareBindings($bindings));
    567▕ 
    568▕             $this->recordsHaveBeenModified();
    569▕ 
  ➜ 570▕             return $statement->execute();
    571▕         });
    572▕     }
    573▕ 
    574▕     /**

      [2m+15 vendor frames [22m
  16  tests/Feature/Feature/Accounting/BankAccountTest.php:72

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Feature\Accounting\FixedAssetTest > user can regist…   
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

  at tests/Feature/Feature/Accounting/FixedAssetTest.php:58
     54▕ 
     55▕     $response = $this->actingAs($user)
     56▕         ->post(route('accounting.fixed-assets.store'), $assetData);
     57▕ 
  ➜  58▕     $response->assertStatus(200);
     59▕     $response->assertJson([
     60▕         'success' => true,
     61▕         'message' => 'Asset registered successfully.',
     62▕     ]);

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Feature\Accounting\FixedAssetTest > fixed asset cal…   
  Failed asserting that 1200.0 is identical to 2400.

  at tests/Feature/Feature/Accounting/FixedAssetTest.php:112
    108▕     // Sum of years: 1+2+3+4+5 = 15
    109▕     // Second year: 4/15 * (10000-1000) = 2400
    110▕     $expectedDepreciation = 2400;
    111▕ 
  ➜ 112▕     expect($asset->calculateSumOfYearsDepreciation())->toBe($expectedDepreciation);
    113▕ });
    114▕ 
    115▕ test('can post depreciation for asset', function () {
    116▕     $user = User::factory()->create();

  1   tests/Feature/Feature/Accounting/FixedAssetTest.php:112

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Feature\Accounting\FixedAssetTe…  ArgumentCountError   
  Too few arguments to function App\Services\FixedAssetService::createDepreciationJournalEntry(), 3 passed in /home/gg/dev/hrm-laravel-base/app/Services/FixedAssetService.php on line 92 and exactly 4 expected

  at app/Services/FixedAssetService.php:253
    249▕             'created_by' => $createdBy,
    250▕         ]);
    251▕     }
    252▕ 
  ➜ 253▕     private function createDepreciationJournalEntry(FixedAsset $asset, float $amount, \DateTime $date, int $createdBy): JournalEntry
    254▕     {
    255▕         $description = "Depreciation for {$asset->name} ({$asset->asset_tag}) - {$date->format('F Y')}";
    256▕ 
    257▕         $entries = [

  1   app/Services/FixedAssetService.php:253
  2   app/Services/FixedAssetService.php:92

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Feature\Accounting\FixedAssetTest > can dispose ass…   
  Failed asserting that '1000.00' is identical to 1000.

  at tests/Feature/Feature/Accounting/FixedAssetTest.php:165
    161▕ 
    162▕     $fixedAssetService = app(FixedAssetService::class);
    163▕     $disposal = $fixedAssetService->disposeAsset($asset, $disposalData);
    164▕ 
  ➜ 165▕     expect($disposal->gain_loss)->toBe(1000); // 8000 - 7000 = 1000 gain
    166▕ 
    167▕     $asset->refresh();
    168▕     expect($asset->status)->toBe('disposed');
    169▕ });

  1   tests/Feature/Feature/Accounting/FixedAssetTest.php:165

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Feature\Accounting\FixedAssetTest > can record asse…   
  Failed asserting that '150.00' is identical to 150.0.

  at tests/Feature/Feature/Accounting/FixedAssetTest.php:226
    222▕     $fixedAssetService = app(FixedAssetService::class);
    223▕     $maintenance = $fixedAssetService->recordMaintenance($asset, $maintenanceData);
    224▕ 
    225▕     expect($maintenance)->toBeInstanceOf(\App\Models\Accounting\AssetMaintenance::class);
  ➜ 226▕     expect($maintenance->cost)->toBe(150.00);
    227▕     expect($maintenance->maintenance_type)->toBe('repair');
    228▕ });
    229▕ 
    230▕ test('asset knows when it is fully depreciated', function () {

  1   tests/Feature/Feature/Accounting/FixedAssetTest.php:226

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Portal\EmployeeManagementTest > employee attendance…   
  Failed asserting that 0 matches expected 12.

  at tests/Feature/HR/EmployeeManagementTest.php:234
    230▕         $response->assertStatus(200);
    231▕         // dd(AttendanceRecord::count());
    232▕         // Verify attendance records are loaded
    233▕         $attendanceCount = AttendanceRecord::where('employee_id', $this->employee->id)->count();
  ➜ 234▕         $this->assertEquals(12, $attendanceCount);
    235▕     }
    236▕ 
    237▕     #[Test]
    238▕     public function test_employee_leave_balance_calculation()

  1   tests/Feature/HR/EmployeeManagementTest.php:234

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Portal\EmployeeManagementTest > employee leave bala…   
  Failed asserting that 0 matches expected 10.

  at tests/Feature/HR/EmployeeManagementTest.php:272
    268▕             ->where('status', 'approved')
    269▕             ->whereYear('start_date', now()->year)
    270▕             ->sum('total_days');
    271▕ 
  ➜ 272▕         $this->assertEquals(10, $usedLeave);
    273▕     }
    274▕ 
    275▕     #[Test]
    276▕     public function test_can_create_employee_without_user_account()

  1   tests/Feature/HR/EmployeeManagementTest.php:272

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\HR\EmployeePositionShiftIntegrationTest > it assign…   
  Failed asserting that a row in the table [employees] matches the attributes {
    "position_id": 1,
    "shift_id": 1
}.

The table is empty.

  at tests/Feature/HR/EmployeePositionShiftIntegrationTest.php:30
     26▕ 
     27▕     $response = $this->actingAs($user)->post(route('hr.employees.store'), $data);
     28▕ 
     29▕     $response->assertRedirect();
  ➜  30▕     $this->assertDatabaseHas('employees', [
     31▕         'position_id' => $position->id,
     32▕         'shift_id' => $shift->id,
     33▕     ]);
     34▕ });

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\HR\EmployeePositionShiftIntegrationTest > it preven…   
  Session missing error: position_id
Failed asserting that false is true.

The following errors occurred during the last request:

The password field is required.
The roles field is required.

  at tests/Feature/HR/EmployeePositionShiftIntegrationTest.php:65
     61▕     ];
     62▕ 
     63▕     $response = $this->actingAs($user)->post(route('hr.employees.store'), $data);
     64▕ 
  ➜  65▕     $response->assertSessionHasErrors('position_id');
     66▕ });
     67▕ 
     68▕ it('filters employees by position', function () {
     69▕     $position1 = JobPosition::factory()->create();

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\HR\JobPositionControllerTest > it deletes a job pos…   
  Failed asserting that a row in the table [job_positions] does not match the attributes {
    "id": 1
}.

Found similar results: [
    {
        "id": 1
    }
].

  at tests/Feature/HR/JobPositionControllerTest.php:99
     95▕     $response->assertRedirect()
     96▕         ->assertSessionHas('success');
     97▕     
     98▕     // Check that position was actually deleted from database
  ➜  99▕     $this->assertDatabaseMissing('job_positions', ['id' => $position->id]);
    100▕ });
    101▕ 
    102▕ it('searches job positions', function () {
    103▕     $user = User::factory()->create();

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\HR\ShiftControllerTest > it updates a shift            
  Session is missing expected key [success].
Failed asserting that false is true.

The following errors occurred during the last request:

The start time field must match the format H:i.
The end time field must match the format H:i.
The working hours field is required.

  at tests/Feature/HR/ShiftControllerTest.php:74
     70▕ 
     71▕     $response = $this->actingAs($user)->put(route('hr.shifts.update', $shift), $data);
     72▕ 
     73▕     $response->assertRedirect()
  ➜  74▕         ->assertSessionHas('success');
     75▕     $this->assertDatabaseHas('shifts', ['name' => 'Updated Shift']);
     76▕ });
     77▕ 
     78▕ it('deletes a shift', function () {

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\HR\ShiftControllerTest > it deletes a shift            
  Failed asserting that a row in the table [shifts] does not match the attributes {
    "id": 1
}.

Found similar results: [
    {
        "id": 1
    }
].

  at tests/Feature/HR/ShiftControllerTest.php:90
     86▕     $response = $this->actingAs($user)->delete(route('hr.shifts.destroy', $shift));
     87▕ 
     88▕     $response->assertRedirect()
     89▕         ->assertSessionHas('success');
  ➜  90▕     $this->assertDatabaseMissing('shifts', ['id' => $shift->id]);
     91▕ });
     92▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\HrmDashboardControllerTest > dashboard view contain…   
  Expected: <!-- resources/views/hrm/dashboard.blade.php -->\n
  <!DOCTYPE html>\n
  <html lang="en">\n
  ... (433 more lines)

  To contain: Attendance Overview

  at tests/Feature/HrmDashboardControllerTest.php:252
    248▕         $response = $this->get(route('hrm.dashboard'));
    249▕ 
    250▕         $response->assertSee('HRM Dashboard');
    251▕         $response->assertSee('Employee Summary');
  ➜ 252▕         $response->assertSee('Attendance Overview');
    253▕         $response->assertSee('Leave Management');
    254▕         $response->assertSee('Performance KPIs');
    255▕         $response->assertSee('Recent Activities');
    256▕         $response->assertSee('OrganizationUnit Stats');

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Inventory\ItemTest > it returns 403 for unauthorize…   
  Expected response status code [403] but received 404.
Failed asserting that 404 is identical to 403.

  at tests/Feature/Inventory/ItemTest.php:326
    322▕         $response = $this->actingAs($setupA['user'])
    323▕             ->getJson("/api/inventory/items/{$itemB->id}/availability");
    324▕         // dd($response->json());
    325▕ 
  ➜ 326▕         $response->assertStatus(403);
    327▕     }
    328▕ 
    329▕     #[Test]
    330▕     public function it_handles_item_with_no_stores()

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Inventory\PermissionTest > user cannot access other…   
  Expected response status code [403] but received 404.
Failed asserting that 404 is identical to 403.

  at tests/Feature/Inventory/PermissionTest.php:96
     92▕         // User from Org A tries to access Org B's store
     93▕         Auth::logout();
     94▕         $this->actingAs($setupA['user'])
     95▕             ->getJson("/api/inventory/stores/{$storeB->id}")
  ➜  96▕             ->assertStatus(403);
     97▕     }
     98▕ }
     99▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Livewire\Accounting\JournalEntriesTest > it creates…   
  Failed asserting that a row in the table [journal_entries] matches the attributes {
    "entry_date": "2025-01-01",
    "description": "Test entry",
    "status": "posted"
}.

Found: [
    {
        "entry_date": "2025-01-01 00:00:00",
        "description": "Test entry",
        "status": "posted"
    }
].

  at tests/Feature/Livewire/Accounting/JournalEntriesTest.php:50
     46▕             ->set('transactions.1.credit', 500);
     47▕ 
     48▕         $component->call('createEntry');
     49▕ 
  ➜  50▕         $this->assertDatabaseHas('journal_entries', [
     51▕             'entry_date' => '2025-01-01',
     52▕             'description' => 'Test entry',
     53▕             'status' => 'posted',
     54▕         ]);

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Livewire\Accounting\Vouchers\CreateTest > voucher c…   
  Failed asserting that Failed asserting that '<div wire:snapshot="{&quot;data&quot;:{&quot;date&quot;:&quot;2025-11-25&quot;,&quot;type&quot;:&quot;&quot;,&quot;amount&quot;:&quot;&quot;,&quot;description&quot;:&quot;&quot;,&quot;notes&quot;:&quot;&quot;},&quot;memo&quot;:{&quot;id&quot;:&quot;24yIdkU03ulhnT5MklT8&quot;,&quot;name&quot;:&quot;accounting.vouchers.create&quot;,&quot;path&quot;:&quot;livewire-unit-test-endpoint\/McUDNzux60CNgYX0V4ZX&quot;,&quot;method&quot;:&quot;GET&quot;,&quot;children&quot;:[],&quot;scripts&quot;:[],&quot;assets&quot;:[],&quot;errors&quot;:[],&quot;locale&quot;:&quot;en&quot;},&quot;checksum&quot;:&quot;26a90e3323a78ad2db271ce21fa5bc5bbed2106ee7eb8e1964fe3c57dd1262ba&quot;}" wire:effects="[]" wire:id="24yIdkU03ulhnT5MklT8">
    <div class="mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8">
        <div class="md:grid md:grid-cols-3 md:gap-6">
            <div class="md:col-span-1">
                <div class="px-4 sm:px-0">
                    <h3 class="text-base font-semibold leading-6 text-gray-900 dark:text-white">
                        Create Voucher
                    </h3>
                    <p class="mt-1 text-sm text-gray-600 dark:text-gray-300">
                        Create a new voucher for your organization.
                    </p>
                </div>
            </div>

            <div class="mt-5 md:col-span-2 md:mt-0">
                <form wire:submit="createVoucher">
                    <div class="shadow sm:rounded-md sm:overflow-hidden">
                        <div class="bg-white dark:bg-gray-800 px-4 py-5 sm:p-6">
                            <div class="grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-6">
                                <!-- Voucher Type -->
                                <div class="sm:col-span-3">
                                    <label for="type" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Voucher Type</label>
                                    <select
                                        wire:model.live="type"
                                        id="type"
                                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                    >
                                        <option value="">Select a type...</option>
                                        <!--[if BLOCK]><![endif]-->                                            <option value="sales">Sales</option>
                                                                                    <option value="sales_return">Sales Return</option>
                                                                                    <option value="purchase">Purchase</option>
                                                                                    <option value="purchase_return">Purchase Return</option>
                                                                                    <option value="salary">Salary</option>
                                                                                    <option value="expense">Expense</option>
                                                                                    <option value="fixed_asset">Fixed Asset</option>
                                                                                    <option value="depreciation">Depreciation</option>
                                        <!--[if ENDBLOCK]><![endif]-->
                                    </select>
                                    <!--[if BLOCK]><![endif]--><!--[if ENDBLOCK]><![endif]-->
                                </div>

                                <!-- Date -->
                                <div class="sm:col-span-3">
                                    <label for="date" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Date</label>
                                    <input
                                        wire:model="date"
                                        type="date"
                                        id="date"
                                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                    />
                                    <!--[if BLOCK]><![endif]--><!--[if ENDBLOCK]><![endif]-->
                                </div>

                                <!-- Amount -->
                                <div class="sm:col-span-3">
                                    <label for="amount" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Amount</label>
                                    <input
                                        wire:model="amount"
                                        type="number"
                                        step="0.01"
                                        min="0.01"
                                        id="amount"
                                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                    />
                                    <!--[if BLOCK]><![endif]--><!--[if ENDBLOCK]><![endif]-->
                                </div>

                                <!-- Description -->
                                <div class="sm:col-span-6">
                                    <label for="description" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Description</label>
                                    <textarea
                                        wire:model="description"
                                        id="description"
                                        rows="3"
                                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                    ></textarea>
                                    <!--[if BLOCK]><![endif]--><!--[if ENDBLOCK]><![endif]-->
                                </div>

                                <!-- Notes -->
                                <div class="sm:col-span-6">
                                    <label for="notes" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Notes</label>
                                    <textarea
                                        wire:model="notes"
                                        id="notes"
                                        rows="3"
                                        placeholder="Optional notes..."
                                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                    ></textarea>
                                    <!--[if BLOCK]><![endif]--><!--[if ENDBLOCK]><![endif]-->
                                </div>
                            </div>
                        </div>

                        <div class="bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                            <button
                                type="submit"
                                class="inline-flex justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"
                                wire:loading.attr="disabled"
                                wire:target="createVoucher"
                            >
                                <span wire:loading.remove>
                                    Create Voucher
                                </span>
                                <span wire:loading class="flex items-center">
                                    <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12c0 5.514 4.486 10 10 10s10-4.486 10-10S17.514 2 12 20.709a8.008 8.008 0 01-8.709 8z"></path>
                                    </svg>
                                    Creating...
                                </span>
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Event Listeners -->
    <script>
        document.addEventListener('livewire:init', () => {
            Livewire.on('show-message', (event) => {
                // You can implement a toast notification system here
                const { message, type } = event.detail;
                
                // Simple alert for now - replace with your notification system
                alert(`${type.toUpperCase()}: ${message}`);
            });
        });
    </script>
</div>' contains "nihil" in specified order..

  at vendor/livewire/livewire/src/Features/SupportTesting/Testable.php:398
    394▕         if (static::hasMacro($method)) {
    395▕             return $this->macroCall($method, $params);
    396▕         }
    397▕ 
  ➜ 398▕         $this->lastState->getResponse()->{$method}(...$params);
    399▕ 
    400▕         return $this;
    401▕     }
    402▕ }

  1   tests/Feature/Livewire/Accounting/Vouchers/CreateTest.php:62

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Livewire\CashManagementDe…  InvalidArgumentException   
  Insufficient cash balance

  at app/Services/CashPaymentService.php:137
    133▕     {
    134▕         $currentBalance = $cashAccount->getBalanceAttribute();
    135▕ 
    136▕         if ($currentBalance < $amount) {
  ➜ 137▕             throw new \InvalidArgumentException('Insufficient cash balance');
    138▕         }
    139▕     }
    140▕ }
    141▕

  1   app/Services/CashPaymentService.php:137
  2   app/Services/CashPaymentService.php:129

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Livewire\CashManagementDe…  InvalidArgumentException   
  Insufficient cash balance

  at app/Services/CashPaymentService.php:137
    133▕     {
    134▕         $currentBalance = $cashAccount->getBalanceAttribute();
    135▕ 
    136▕         if ($currentBalance < $amount) {
  ➜ 137▕             throw new \InvalidArgumentException('Insufficient cash balance');
    138▕         }
    139▕     }
    140▕ }
    141▕

  1   app/Services/CashPaymentService.php:137
  2   app/Services/CashPaymentService.php:129

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Livewire\Organization\OrganizationListTest > it sho…   
  Expected: <div wire:snapshot="" wire:effects="" wire:id="7E5Xc3YJfBRxvArB19NZ">\n
      <!-- Header with Search and Actions -->\n
      <div class="flex flex-col sm:flex-row justify-between items-center mb-6 space-y-4 sm:space-y-0">\n
  ... (103 more lines)

  To contain: No organizations found

  at vendor/livewire/livewire/src/Features/SupportTesting/MakesAssertions.php:14
     10▕ {
     11▕     function assertSee($values, $escape = true, $stripInitialData = true)
     12▕     {
     13▕         foreach (Arr::wrap($values) as $value) {
  ➜  14▕             PHPUnit::assertStringContainsString(
     15▕                 $escape ? e($value): $value,
     16▕                 $this->html($stripInitialData)
     17▕             );
     18▕         }

      [2m+1 vendor frames [22m
  2   tests/Feature/Livewire/Organization/OrganizationListTest.php:148

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Livewire\Organization\OrganizationTreeTest > it can…   
  Expected: <div wire:snapshot="" wire:effects="" wire:id="B7nmX3RZzO0ShilXPIjq" class="p-6 bg-white rounded shadow">\n
      <h2 class="text-2xl font-semibold mb-4">Organizational Tree </h2>\n
      <div class="mb-4">\n
  ... (90 more lines)

  To contain: CEO Office

  at vendor/livewire/livewire/src/Features/SupportTesting/MakesAssertions.php:14
     10▕ {
     11▕     function assertSee($values, $escape = true, $stripInitialData = true)
     12▕     {
     13▕         foreach (Arr::wrap($values) as $value) {
  ➜  14▕             PHPUnit::assertStringContainsString(
     15▕                 $escape ? e($value): $value,
     16▕                 $this->html($stripInitialData)
     17▕             );
     18▕         }

      [2m+1 vendor frames [22m
  2   tests/Feature/Livewire/Organization/OrganizationTreeTest.php:33

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Livewire\Organization\OrganizationTreeTest > an org…   
  Failed asserting that 2 matches expected 5.

  at tests/Feature/Livewire/Organization/OrganizationTreeTest.php:55
     51▕             ->call('updateParent', $marketing->id, $hr->id)
     52▕             ->assertStatus(200);
     53▕ 
     54▕         // 3. Assert: Check if the database has been updated correctly.
  ➜  55▕         $this->assertEquals($hr->id, $marketing->fresh()->parent_id);
     56▕         $this->assertNotEquals($ceoOffice->id, $marketing->fresh()->parent_id);
     57▕     }
     58▕ 
     59▕

  1   tests/Feature/Livewire/Organization/OrganizationTreeTest.php:55

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Livewire\Organization\OrganizationTreeTest > an org…   
  Failed asserting that 2 matches expected null.

  at tests/Feature/Livewire/Organization/OrganizationTreeTest.php:86
     82▕         Livewire::test(OrganizationTree::class)
     83▕             ->call('updateParent', $child->id, null);
     84▕ 
     85▕         // Assert
  ➜  86▕         $this->assertEquals(null, $child->fresh()->parent_id);
     87▕     }
     88▕ 
     89▕     #[Test]
     90▕     public function a_parent_cannot_be_dropped_onto_one_of_its_descendants()

  1   tests/Feature/Livewire/Organization/OrganizationTreeTest.php:86

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Livewire\Organization\OrganizationTreeTest > a sibl…   
  Failed asserting that 2 matches expected 3.

  at tests/Feature/Livewire/Organization/OrganizationTreeTest.php:118
    114▕         Livewire::test(OrganizationTree::class)
    115▕             ->call('updateParent', $siblingB->id, $siblingA->id);
    116▕ 
    117▕         // Assert
  ➜ 118▕         $this->assertEquals($siblingA->id, $siblingB->fresh()->parent_id);
    119▕     }
    120▕ 
    121▕     #[Test]
    122▕     public function an_empty_tree_renders_correctly()

  1   tests/Feature/Livewire/Organization/OrganizationTreeTest.php:118

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Livewire\Organization\OrganizationTreeTest > an emp…   
  Failed asserting that 1 matches expected 0.

  at tests/Feature/Livewire/Organization/OrganizationTreeTest.php:125
    121▕     #[Test]
    122▕     public function an_empty_tree_renders_correctly()
    123▕     {
    124▕         // Arrange: No units in the database
  ➜ 125▕         $this->assertEquals(0, OrganizationUnit::count());
    126▕ 
    127▕         // Act & Assert
    128▕         Livewire::test(OrganizationTree::class)
    129▕             ->assertSee('No organizational units found.');

  1   tests/Feature/Livewire/Organization/OrganizationTreeTest.php:125

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  UserPlacementTest > it can unassign a user by dropping them onto…    
  Failed asserting that a row in the table [organization_user] matches the attributes {
    "user_id": 2,
    "organization_id": 2,
    "organization_unit_id": null
}.

Found similar results: [
    {
        "user_id": 2,
        "organization_id": 2,
        "organization_unit_id": 2
    },
    {
        "user_id": 2,
        "organization_id": 1,
        "organization_unit_id": null
    }
].

  at tests/Feature/Livewire/Organization/UserPlacementTest.php:65
     61▕         Livewire::test(UserPlacement::class, ['organizationId' => $organization->id])
     62▕             ->call('assignUserToUnit', $user->id, null);
     63▕ 
     64▕         // Assert
  ➜  65▕         $this->assertDatabaseHas('organization_user', [
     66▕             'user_id' => $user->id,
     67▕             'organization_id' => $organization->id,
     68▕             'organization_unit_id' => null
     69▕         ]);

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Models\FinancialManagementTest > invoice amount due…   
  Failed asserting that 5000.0 is identical to 3000.0.

  at tests/Feature/Models/FinancialManagementTest.php:141
    137▕         'amount' => 2000.00,
    138▕         'status' => 'received',
    139▕     ]);
    140▕ 
  ➜ 141▕     expect($invoice->amount_due)->toBe(3000.00);
    142▕ });
    143▕ 
    144▕ test('invoice overdue detection works', function () {
    145▕     $organization = Organization::factory()->create();

  1   tests/Feature/Models/FinancialManagementTest.php:141

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Organization\OrganizationDashboardTest > authentica…   
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Error: Call to undefined method App\Http\Controllers\OrganizationDashboardController::index() in /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php:46
Stack trace:
#0 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch()
#1 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#2 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#3 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}()
#4 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Auth/Middleware/EnsureEmailIsVerified.php(41): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#5 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\EnsureEmailIsVerified->handle()
#6 /home/gg/dev/hrm-laravel-base/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(59): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#7 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Barryvdh\Debugbar\Middleware\InjectDebugbar->handle()
#8 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#9 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle()
#10 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#11 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle()
#12 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/VerifyCsrfToken.php(87): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#13 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\VerifyCsrfToken->handle()
#14 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/View/Middleware/ShareErrorsFromSession.php(48): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#15 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\View\Middleware\ShareErrorsFromSession->handle()
#16 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(120): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#17 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(63): Illuminate\Session\Middleware\StartSession->handleStatefulRequest()
#18 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Session\Middleware\StartSession->handle()
#19 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/AddQueuedCookiesToResponse.php(36): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#20 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle()
#21 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/EncryptCookies.php(74): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#22 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\EncryptCookies->handle()
#23 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#24 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then()
#25 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack()
#26 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute()
#27 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute()
#28 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch()
#29 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}()
#30 /home/gg/dev/hrm-laravel-base/vendor/livewire/livewire/src/Features/SupportDisablingBackButtonCache/DisableBackButtonCacheMiddleware.php(19): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#31 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Livewire\Features\SupportDisablingBackButtonCache\DisableBackButtonCacheMiddleware->handle()
#32 /home/gg/dev/hrm-laravel-base/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(59): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#33 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Barryvdh\Debugbar\Middleware\InjectDebugbar->handle()
#34 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#35 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#36 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle()
#37 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#38 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#39 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle()
#40 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#41 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle()
#42 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#43 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle()
#44 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(48): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#45 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle()
#46 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#47 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle()
#48 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#49 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle()
#50 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#51 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle()
#52 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#53 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then()
#54 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter()
#55 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle()
#56 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(368): Illuminate\Foundation\Testing\TestCase->call()
#57 /home/gg/dev/hrm-laravel-base/tests/Feature/OrganizationDashboardTest.php(34): Illuminate\Foundation\Testing\TestCase->get()
#58 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(1656): Tests\Feature\Organization\OrganizationDashboardTest->authenticated_user_can_access_organization_dashboard()
#59 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(514): PHPUnit\Framework\TestCase->runTest()
#60 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#61 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run()
#62 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#63 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#64 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#65 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#66 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run()
#67 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/src/Kernel.php(103): PHPUnit\TextUI\Application->run()
#68 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(184): Pest\Kernel->handle()
#69 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(192): {closure:/home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest:18}()
#70 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Http\Controllers\OrganizationDashboardController::index()

  at tests/Feature/OrganizationDashboardTest.php:36
     32▕     {
     33▕         $response = $this->actingAs($this->user)
     34▕             ->get(route('organization.dashboard'));
     35▕ 
  ➜  36▕         $response->assertStatus(200);
     37▕         $response->assertSee('Organization Management');
     38▕     }
     39▕ 
     40▕     #[Test]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Organization\OrganizationDashboardTest > dashboard…    
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Error: Call to undefined method App\Http\Controllers\OrganizationDashboardController::index() in /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php:46
Stack trace:
#0 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch()
#1 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#2 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#3 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}()
#4 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Auth/Middleware/EnsureEmailIsVerified.php(41): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#5 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\EnsureEmailIsVerified->handle()
#6 /home/gg/dev/hrm-laravel-base/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(59): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#7 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Barryvdh\Debugbar\Middleware\InjectDebugbar->handle()
#8 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#9 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle()
#10 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#11 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle()
#12 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/VerifyCsrfToken.php(87): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#13 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\VerifyCsrfToken->handle()
#14 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/View/Middleware/ShareErrorsFromSession.php(48): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#15 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\View\Middleware\ShareErrorsFromSession->handle()
#16 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(120): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#17 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(63): Illuminate\Session\Middleware\StartSession->handleStatefulRequest()
#18 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Session\Middleware\StartSession->handle()
#19 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/AddQueuedCookiesToResponse.php(36): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#20 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle()
#21 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/EncryptCookies.php(74): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#22 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\EncryptCookies->handle()
#23 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#24 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then()
#25 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack()
#26 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute()
#27 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute()
#28 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch()
#29 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}()
#30 /home/gg/dev/hrm-laravel-base/vendor/livewire/livewire/src/Features/SupportDisablingBackButtonCache/DisableBackButtonCacheMiddleware.php(19): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#31 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Livewire\Features\SupportDisablingBackButtonCache\DisableBackButtonCacheMiddleware->handle()
#32 /home/gg/dev/hrm-laravel-base/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(59): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#33 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Barryvdh\Debugbar\Middleware\InjectDebugbar->handle()
#34 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#35 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#36 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle()
#37 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#38 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#39 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle()
#40 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#41 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle()
#42 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#43 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle()
#44 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(48): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#45 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle()
#46 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#47 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle()
#48 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#49 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle()
#50 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#51 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle()
#52 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#53 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then()
#54 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter()
#55 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle()
#56 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(368): Illuminate\Foundation\Testing\TestCase->call()
#57 /home/gg/dev/hrm-laravel-base/tests/Feature/OrganizationDashboardTest.php(54): Illuminate\Foundation\Testing\TestCase->get()
#58 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(1656): Tests\Feature\Organization\OrganizationDashboardTest->dashboard_displays_correct_organization_metrics()
#59 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(514): PHPUnit\Framework\TestCase->runTest()
#60 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#61 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run()
#62 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#63 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#64 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#65 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#66 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run()
#67 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/src/Kernel.php(103): PHPUnit\TextUI\Application->run()
#68 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(184): Pest\Kernel->handle()
#69 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(192): {closure:/home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest:18}()
#70 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Http\Controllers\OrganizationDashboardController::index()

  at tests/Feature/OrganizationDashboardTest.php:56
     52▕ 
     53▕         $response = $this->actingAs($this->user)
     54▕             ->get(route('organization.dashboard'));
     55▕ 
  ➜  56▕         $response->assertStatus(200);
     57▕         $response->assertSee('Total Employees');
     58▕         $response->assertSee('Departments');
     59▕     }
     60▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Organization\OrganizationDashboardTest > user can v…   
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

InvalidArgumentException: View [organizations.structure] not found. in /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/View/FileViewFinder.php:138
Stack trace:
#0 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/View/FileViewFinder.php(78): Illuminate\View\FileViewFinder->findInPaths()
#1 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/View/Factory.php(150): Illuminate\View\FileViewFinder->find()
#2 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/helpers.php(1101): Illuminate\View\Factory->make()
#3 /home/gg/dev/hrm-laravel-base/app/Http/Controllers/OrganizationDashboardController.php(100): view()
#4 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(46): App\Http\Controllers\OrganizationDashboardController->structure()
#5 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch()
#6 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#7 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#8 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}()
#9 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Auth/Middleware/EnsureEmailIsVerified.php(41): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#10 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\EnsureEmailIsVerified->handle()
#11 /home/gg/dev/hrm-laravel-base/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(59): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#12 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Barryvdh\Debugbar\Middleware\InjectDebugbar->handle()
#13 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#14 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle()
#15 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#16 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle()
#17 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/VerifyCsrfToken.php(87): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#18 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\VerifyCsrfToken->handle()
#19 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/View/Middleware/ShareErrorsFromSession.php(48): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#20 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\View\Middleware\ShareErrorsFromSession->handle()
#21 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(120): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#22 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(63): Illuminate\Session\Middleware\StartSession->handleStatefulRequest()
#23 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Session\Middleware\StartSession->handle()
#24 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/AddQueuedCookiesToResponse.php(36): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#25 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle()
#26 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/EncryptCookies.php(74): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#27 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\EncryptCookies->handle()
#28 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#29 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then()
#30 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack()
#31 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute()
#32 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute()
#33 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch()
#34 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}()
#35 /home/gg/dev/hrm-laravel-base/vendor/livewire/livewire/src/Features/SupportDisablingBackButtonCache/DisableBackButtonCacheMiddleware.php(19): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#36 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Livewire\Features\SupportDisablingBackButtonCache\DisableBackButtonCacheMiddleware->handle()
#37 /home/gg/dev/hrm-laravel-base/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(59): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#38 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Barryvdh\Debugbar\Middleware\InjectDebugbar->handle()
#39 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#40 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#41 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle()
#42 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#43 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#44 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle()
#45 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#46 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle()
#47 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#48 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle()
#49 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(48): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#50 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle()
#51 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#52 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle()
#53 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#54 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle()
#55 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#56 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle()
#57 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#58 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then()
#59 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter()
#60 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle()
#61 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(368): Illuminate\Foundation\Testing\TestCase->call()
#62 /home/gg/dev/hrm-laravel-base/tests/Feature/OrganizationDashboardTest.php(75): Illuminate\Foundation\Testing\TestCase->get()
#63 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(1656): Tests\Feature\Organization\OrganizationDashboardTest->user_can_view_organization_structure()
#64 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(514): PHPUnit\Framework\TestCase->runTest()
#65 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#66 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run()
#67 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#68 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#69 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#70 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#71 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run()
#72 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/src/Kernel.php(103): PHPUnit\TextUI\Application->run()
#73 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(184): Pest\Kernel->handle()
#74 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(192): {closure:/home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest:18}()
#75 {main}

----------------------------------------------------------------------------------

View [organizations.structure] not found.

  at tests/Feature/OrganizationDashboardTest.php:77
     73▕ 
     74▕         $response = $this->actingAs($this->user)
     75▕             ->get(route('organization.structure'));
     76▕ 
  ➜  77▕         $response->assertStatus(200);
     78▕         $response->assertSee($parentUnit->name);
     79▕         $response->assertSee($childUnit->name);
     80▕     }
     81▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Organization\OrganizationDashboardTest > dashboard…    
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Error: Call to undefined method App\Http\Controllers\OrganizationDashboardController::index() in /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php:46
Stack trace:
#0 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch()
#1 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#2 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#3 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}()
#4 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Auth/Middleware/EnsureEmailIsVerified.php(41): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#5 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\EnsureEmailIsVerified->handle()
#6 /home/gg/dev/hrm-laravel-base/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(59): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#7 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Barryvdh\Debugbar\Middleware\InjectDebugbar->handle()
#8 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#9 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle()
#10 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#11 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle()
#12 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/VerifyCsrfToken.php(87): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#13 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\VerifyCsrfToken->handle()
#14 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/View/Middleware/ShareErrorsFromSession.php(48): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#15 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\View\Middleware\ShareErrorsFromSession->handle()
#16 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(120): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#17 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(63): Illuminate\Session\Middleware\StartSession->handleStatefulRequest()
#18 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Session\Middleware\StartSession->handle()
#19 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/AddQueuedCookiesToResponse.php(36): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#20 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle()
#21 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/EncryptCookies.php(74): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#22 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\EncryptCookies->handle()
#23 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#24 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then()
#25 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack()
#26 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute()
#27 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute()
#28 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch()
#29 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}()
#30 /home/gg/dev/hrm-laravel-base/vendor/livewire/livewire/src/Features/SupportDisablingBackButtonCache/DisableBackButtonCacheMiddleware.php(19): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#31 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Livewire\Features\SupportDisablingBackButtonCache\DisableBackButtonCacheMiddleware->handle()
#32 /home/gg/dev/hrm-laravel-base/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(59): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#33 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Barryvdh\Debugbar\Middleware\InjectDebugbar->handle()
#34 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#35 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#36 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle()
#37 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#38 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#39 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle()
#40 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#41 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle()
#42 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#43 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle()
#44 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(48): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#45 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle()
#46 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#47 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle()
#48 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#49 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle()
#50 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#51 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle()
#52 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#53 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then()
#54 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter()
#55 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle()
#56 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(368): Illuminate\Foundation\Testing\TestCase->call()
#57 /home/gg/dev/hrm-laravel-base/tests/Feature/OrganizationDashboardTest.php(100): Illuminate\Foundation\Testing\TestCase->get()
#58 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(1656): Tests\Feature\Organization\OrganizationDashboardTest->dashboard_includes_department_distribution_data()
#59 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(514): PHPUnit\Framework\TestCase->runTest()
#60 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#61 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run()
#62 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#63 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#64 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#65 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#66 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run()
#67 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/src/Kernel.php(103): PHPUnit\TextUI\Application->run()
#68 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(184): Pest\Kernel->handle()
#69 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(192): {closure:/home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest:18}()
#70 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Http\Controllers\OrganizationDashboardController::index()

  at tests/Feature/OrganizationDashboardTest.php:102
     98▕ 
     99▕         $response = $this->actingAs($this->user)
    100▕             ->get(route('organization.dashboard'));
    101▕ 
  ➜ 102▕         $response->assertStatus(200);
    103▕         foreach ($departments as $dept) {
    104▕             $response->assertSee($dept);
    105▕         }
    106▕     }

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Organization\OrganizationDashboardTest > analytics…    
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

InvalidArgumentException: View [organizations.analytics] not found. in /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/View/FileViewFinder.php:138
Stack trace:
#0 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/View/FileViewFinder.php(78): Illuminate\View\FileViewFinder->findInPaths()
#1 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/View/Factory.php(150): Illuminate\View\FileViewFinder->find()
#2 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/helpers.php(1101): Illuminate\View\Factory->make()
#3 /home/gg/dev/hrm-laravel-base/app/Http/Controllers/OrganizationDashboardController.php(118): view()
#4 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(46): App\Http\Controllers\OrganizationDashboardController->analytics()
#5 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch()
#6 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#7 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#8 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}()
#9 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Auth/Middleware/EnsureEmailIsVerified.php(41): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#10 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\EnsureEmailIsVerified->handle()
#11 /home/gg/dev/hrm-laravel-base/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(59): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#12 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Barryvdh\Debugbar\Middleware\InjectDebugbar->handle()
#13 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#14 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle()
#15 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#16 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle()
#17 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/VerifyCsrfToken.php(87): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#18 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\VerifyCsrfToken->handle()
#19 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/View/Middleware/ShareErrorsFromSession.php(48): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#20 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\View\Middleware\ShareErrorsFromSession->handle()
#21 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(120): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#22 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(63): Illuminate\Session\Middleware\StartSession->handleStatefulRequest()
#23 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Session\Middleware\StartSession->handle()
#24 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/AddQueuedCookiesToResponse.php(36): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#25 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle()
#26 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/EncryptCookies.php(74): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#27 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\EncryptCookies->handle()
#28 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#29 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then()
#30 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack()
#31 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute()
#32 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute()
#33 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch()
#34 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}()
#35 /home/gg/dev/hrm-laravel-base/vendor/livewire/livewire/src/Features/SupportDisablingBackButtonCache/DisableBackButtonCacheMiddleware.php(19): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#36 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Livewire\Features\SupportDisablingBackButtonCache\DisableBackButtonCacheMiddleware->handle()
#37 /home/gg/dev/hrm-laravel-base/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(59): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#38 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Barryvdh\Debugbar\Middleware\InjectDebugbar->handle()
#39 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#40 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#41 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle()
#42 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#43 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#44 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle()
#45 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#46 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle()
#47 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#48 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle()
#49 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(48): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#50 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle()
#51 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#52 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle()
#53 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#54 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle()
#55 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#56 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle()
#57 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#58 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then()
#59 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter()
#60 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle()
#61 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(368): Illuminate\Foundation\Testing\TestCase->call()
#62 /home/gg/dev/hrm-laravel-base/tests/Feature/OrganizationDashboardTest.php(112): Illuminate\Foundation\Testing\TestCase->get()
#63 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(1656): Tests\Feature\Organization\OrganizationDashboardTest->analytics_page_displays_trend_data()
#64 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(514): PHPUnit\Framework\TestCase->runTest()
#65 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#66 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run()
#67 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#68 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#69 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#70 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#71 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run()
#72 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/src/Kernel.php(103): PHPUnit\TextUI\Application->run()
#73 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(184): Pest\Kernel->handle()
#74 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(192): {closure:/home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest:18}()
#75 {main}

----------------------------------------------------------------------------------

View [organizations.analytics] not found.

  at tests/Feature/OrganizationDashboardTest.php:114
    110▕     {
    111▕         $response = $this->actingAs($this->user)
    112▕             ->get(route('organization.analytics'));
    113▕ 
  ➜ 114▕         $response->assertStatus(200);
    115▕         $response->assertSee('Analytics');
    116▕         $response->assertSee('Headcount Trend');
    117▕         $response->assertSee('Performance Metrics');
    118▕     }

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Portal\OrganizationUserIntegrationTest > manager ca…   
  Expected response status code [200] but received 403.
Failed asserting that 403 is identical to 200.

  at tests/Feature/OrganizationUserIntegrationTest.php:77
     73▕         $response1->assertStatus(200);
     74▕ 
     75▕         // Can access manager portal
     76▕         $response2 = $this->get(route('portal.manager.dashboard'));
  ➜  77▕         $response2->assertStatus(200);
     78▕     }
     79▕ 
     80▕     #[Test]
     81▕     public function user_without_organization_access_denied()

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Portal\OrganizationUserIntegrationTest > has role m…   
  Roles should be cast to array
Failed asserting that '["manager","employee"]' is of type array.

  at tests/Feature/OrganizationUserIntegrationTest.php:109
    105▕             ->where('organization_id', $this->organization->id)
    106▕             ->first();
    107▕ 
    108▕         $this->assertNotNull($managerUser, 'OrganizationUser should exist for manager');
  ➜ 109▕         $this->assertIsArray($managerUser->roles, 'Roles should be cast to array');
    110▕         $this->assertContains('manager', $managerUser->roles, 'Roles should contain manager');
    111▕         $this->assertContains('employee', $managerUser->roles, 'Roles should contain employee');
    112▕         $this->assertFalse($managerUser->hasRole('hr'));
    113▕

  1   tests/Feature/OrganizationUserIntegrationTest.php:109

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Portal\OrganizationUserIntegrationTest > has any ro…   
  Failed asserting that false is true.

  at tests/Feature/OrganizationUserIntegrationTest.php:128
    124▕         if (is_string($roles)) {
    125▕             $roles = json_decode($roles, true);
    126▕         }
    127▕ 
  ➜ 128▕         $this->assertTrue($hrUser->hasAnyRole(['hr', 'admin']));
    129▕         $this->assertTrue($hrUser->hasAnyRole(['manager', 'employee']));
    130▕         $this->assertFalse($hrUser->hasAnyRole(['admin', 'super_admin']));
    131▕     }
    132▕ }

  1   tests/Feature/OrganizationUserIntegrationTest.php:128

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OutstandingStatementsTest > can generate payables a…   
  Failed asserting that actual size 0 matches expected size 1.

  at tests/Feature/OutstandingStatementsTest.php:64
     60▕ 
     61▕     $aging = app(OutstandingStatementsService::class)->generatePayablesAging();
     62▕     $summary = app(OutstandingStatementsService::class)->getPayablesAgingSummary();
     63▕ 
  ➜  64▕     expect($aging)->toHaveCount(1);
     65▕     expect($aging->first()['aging_bucket'])->toBe('Current');
     66▕     expect($summary['Total'])->toBe(2000.0);
     67▕ });
     68▕

  1   tests/Feature/OutstandingStatementsTest.php:64

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OutstandingStatementsTest > can generate comprehens…   
  Failed asserting that 0 is identical to 1.

  at tests/Feature/OutstandingStatementsTest.php:174
    170▕ 
    171▕     $statement = app(OutstandingStatementsService::class)->generateReceivablesStatement();
    172▕ 
    173▕     expect($statement['type'])->toBe('receivables');
  ➜ 174▕     expect($statement['summary']['total_customers'])->toBe(1);
    175▕     expect($statement['summary']['total_outstanding'])->toBe(5000);
    176▕     expect($statement['summary']['aging']['current'])->toBe(3000); // 1000 + 2000
    177▕     expect($statement['summary']['aging']['30_days'])->toBe(1500); // 45 days = 30 days bucket
    178▕     expect($statement['summary']['aging']['60_days'])->toBe(0); // No entries in 60 days bucket

  1   tests/Feature/OutstandingStatementsTest.php:174

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OutstandingStatementsTest > can generate comprehens…   
  Failed asserting that 0 is identical to 1.

  at tests/Feature/OutstandingStatementsTest.php:226
    222▕ 
    223▕     $statement = app(OutstandingStatementsService::class)->generatePayablesStatement();
    224▕ 
    225▕     expect($statement['type'])->toBe('payables');
  ➜ 226▕     expect($statement['summary']['total_vendors'])->toBe(1);
    227▕     expect($statement['summary']['total_outstanding'])->toBe(4500);
    228▕     expect($statement['summary']['aging']['current'])->toBe(1000);
    229▕     expect($statement['summary']['aging']['30_days'])->toBe(2000);
    230▕     expect($statement['summary']['aging']['60_days'])->toBe(1500);

  1   tests/Feature/OutstandingStatementsTest.php:226

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OutstandingStatementsTest > can filter receivables…    
  Failed asserting that 0 is identical to 1.

  at tests/Feature/OutstandingStatementsTest.php:267
    263▕     $statement = app(OutstandingStatementsService::class)->generateReceivablesStatement(
    264▕         customerId: $customer1->id
    265▕     );
    266▕ 
  ➜ 267▕     expect($statement['summary']['total_customers'])->toBe(1);
    268▕     expect($statement['summary']['total_outstanding'])->toBe(1000);
    269▕     expect($statement['customer_statements']->first()['customer']['id'])->toBe($customer1->id);
    270▕ });
    271▕

  1   tests/Feature/OutstandingStatementsTest.php:267

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OutstandingStatementsTest > can filter payables sta…   
  Failed asserting that 0 is identical to 1.

  at tests/Feature/OutstandingStatementsTest.php:306
    302▕     $statement = app(OutstandingStatementsService::class)->generatePayablesStatement(
    303▕         vendorId: $vendor1->id
    304▕     );
    305▕ 
  ➜ 306▕     expect($statement['summary']['total_vendors'])->toBe(1);
    307▕     expect($statement['summary']['total_outstanding'])->toBe(1000);
    308▕     expect($statement['vendor_statements']->first()['vendor']['id'])->toBe($vendor1->id);
    309▕ });
    310▕

  1   tests/Feature/OutstandingStatementsTest.php:306

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OutstandingStatementsTest > can filter statements b…   
  Failed asserting that 0 is identical to 1000.

  at tests/Feature/OutstandingStatementsTest.php:349
    345▕         startDate: $startDate,
    346▕         endDate: $endDate
    347▕     );
    348▕ 
  ➜ 349▕     expect($statement['summary']['total_outstanding'])->toBe(1000);
    350▕ });
    351▕ 
    352▕ test('can export statement data', function () {
    353▕     $setup = $this->createOrganizationWithUser();

  1   tests/Feature/OutstandingStatementsTest.php:349

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OutstandingStatementsTest > can export statement da…   
  Failed asserting that actual size 0 matches expected size 1.

  at tests/Feature/OutstandingStatementsTest.php:376
    372▕ 
    373▕     expect($exportData)->toHaveKey('title');
    374▕     expect($exportData['title'])->toBe('Accounts Receivable Outstanding Statement');
    375▕     expect($exportData)->toHaveKey('customers');
  ➜ 376▕     expect($exportData['customers'])->toHaveCount(1);
    377▕     expect($exportData['customers']->first()['customer_name'])->toBe($customer->name);
    378▕ });
    379▕ 
    380▕ test('can get aging summary for dashboard', function () {

  1   tests/Feature/OutstandingStatementsTest.php:376

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OutstandingStatementsTest > can get aging summary f…   
  Failed asserting that 0 is identical to 1000.

  at tests/Feature/OutstandingStatementsTest.php:411
    407▕     $summary = app(OutstandingStatementsService::class)->getAgingSummary();
    408▕ 
    409▕     expect($summary)->toHaveKey('receivables');
    410▕     expect($summary)->toHaveKey('payables');
  ➜ 411▕     expect($summary['receivables']['total'])->toBe(1000);
    412▕     expect($summary['payables']['total'])->toBe(1500);
    413▕ });
    414▕ 
    415▕ test('respects organization isolation', function () {

  1   tests/Feature/OutstandingStatementsTest.php:411

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PdfGenerationTest > movement pdf download should re…   
  Expected response status code [>=200, <300] but received 500.
Failed asserting that false is true.

The following exception occurred during the last request:

Error: Class "App\Http\Controllers\Inventory\TransactionItem" not found in /home/gg/dev/hrm-laravel-base/app/Http/Controllers/Inventory/InventoryReportController.php:719
Stack trace:
#0 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(46): App\Http\Controllers\Inventory\InventoryReportController->downloadMovement()
#1 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch()
#2 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#3 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#4 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}()
#5 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Auth/Middleware/EnsureEmailIsVerified.php(41): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#6 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\EnsureEmailIsVerified->handle()
#7 /home/gg/dev/hrm-laravel-base/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(59): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#8 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Barryvdh\Debugbar\Middleware\InjectDebugbar->handle()
#9 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#10 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle()
#11 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#12 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle()
#13 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/VerifyCsrfToken.php(87): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#14 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\VerifyCsrfToken->handle()
#15 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/View/Middleware/ShareErrorsFromSession.php(48): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#16 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\View\Middleware\ShareErrorsFromSession->handle()
#17 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(120): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#18 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(63): Illuminate\Session\Middleware\StartSession->handleStatefulRequest()
#19 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Session\Middleware\StartSession->handle()
#20 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/AddQueuedCookiesToResponse.php(36): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#21 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle()
#22 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/EncryptCookies.php(74): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#23 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\EncryptCookies->handle()
#24 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#25 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then()
#26 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack()
#27 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute()
#28 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute()
#29 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch()
#30 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}()
#31 /home/gg/dev/hrm-laravel-base/vendor/livewire/livewire/src/Features/SupportDisablingBackButtonCache/DisableBackButtonCacheMiddleware.php(19): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#32 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Livewire\Features\SupportDisablingBackButtonCache\DisableBackButtonCacheMiddleware->handle()
#33 /home/gg/dev/hrm-laravel-base/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(59): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#34 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Barryvdh\Debugbar\Middleware\InjectDebugbar->handle()
#35 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#36 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#37 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle()
#38 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#39 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#40 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle()
#41 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#42 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle()
#43 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#44 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle()
#45 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(48): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#46 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle()
#47 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#48 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle()
#49 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#50 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle()
#51 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#52 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle()
#53 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#54 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then()
#55 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter()
#56 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle()
#57 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(368): Illuminate\Foundation\Testing\TestCase->call()
#58 /home/gg/dev/hrm-laravel-base/tests/Feature/PdfGenerationTest.php(220): Illuminate\Foundation\Testing\TestCase->get()
#59 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(1656): Tests\Feature\PdfGenerationTest->movement_pdf_download_should_return_pdf_response()
#60 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(514): PHPUnit\Framework\TestCase->runTest()
#61 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#62 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run()
#63 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#64 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#65 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#66 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#67 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run()
#68 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/src/Kernel.php(103): PHPUnit\TextUI\Application->run()
#69 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(184): Pest\Kernel->handle()
#70 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(192): {closure:/home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest:18}()
#71 {main}

----------------------------------------------------------------------------------

Class "App\Http\Controllers\Inventory\TransactionItem" not found

  at tests/Feature/PdfGenerationTest.php:222
    218▕     public function movement_pdf_download_should_return_pdf_response(): void
    219▕     {
    220▕         $response = $this->get(route('inventory.reports.download.movement'));
    221▕ 
  ➜ 222▕         $response->assertSuccessful();
    223▕         $response->assertHeader('Content-Type', 'application/pdf');
    224▕         $response->assertHeader('Content-Disposition');
    225▕     }
    226▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Portal\CompletePortalTest > employee can clock in a…   
  Expected response status code [201, 301, 302, 303, 307, 308] but received 200.
Failed asserting that false is true.

  at tests/Feature/Portal/CompletePortalTest.php:88
     84▕         $this->actingAsRegularEmployee();
     85▕ 
     86▕         // Clock in
     87▕         $response = $this->post(route('portal.employee.clock-in'));
  ➜  88▕         $response->assertRedirect();
     89▕         $response->assertSessionHas('success');
     90▕ 
     91▕         $this->assertDatabaseHas('attendance_records', [
     92▕             'employee_id' => $this->employee->id,

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Portal\CompletePortalTest > manager can access mana…   
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Error: Class "App\Http\Controllers\Portal\Carbon" not found in /home/gg/dev/hrm-laravel-base/app/Http/Controllers/Portal/ManagerPortalController.php:172
Stack trace:
#0 /home/gg/dev/hrm-laravel-base/app/Http/Controllers/Portal/ManagerPortalController.php(149): App\Http\Controllers\Portal\ManagerPortalController->calculateTeamAttendanceRate()
#1 /home/gg/dev/hrm-laravel-base/app/Http/Controllers/Portal/ManagerPortalController.php(30): App\Http\Controllers\Portal\ManagerPortalController->getTeamMetrics()
#2 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(46): App\Http\Controllers\Portal\ManagerPortalController->dashboard()
#3 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch()
#4 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#5 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#6 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}()
#7 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Auth/Middleware/EnsureEmailIsVerified.php(41): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#8 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\EnsureEmailIsVerified->handle()
#9 /home/gg/dev/hrm-laravel-base/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(59): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#10 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Barryvdh\Debugbar\Middleware\InjectDebugbar->handle()
#11 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#12 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle()
#13 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#14 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle()
#15 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/VerifyCsrfToken.php(87): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#16 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\VerifyCsrfToken->handle()
#17 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/View/Middleware/ShareErrorsFromSession.php(48): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#18 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\View\Middleware\ShareErrorsFromSession->handle()
#19 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(120): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#20 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(63): Illuminate\Session\Middleware\StartSession->handleStatefulRequest()
#21 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Session\Middleware\StartSession->handle()
#22 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/AddQueuedCookiesToResponse.php(36): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#23 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle()
#24 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/EncryptCookies.php(74): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#25 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\EncryptCookies->handle()
#26 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#27 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then()
#28 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack()
#29 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute()
#30 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute()
#31 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch()
#32 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}()
#33 /home/gg/dev/hrm-laravel-base/vendor/livewire/livewire/src/Features/SupportDisablingBackButtonCache/DisableBackButtonCacheMiddleware.php(19): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#34 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Livewire\Features\SupportDisablingBackButtonCache\DisableBackButtonCacheMiddleware->handle()
#35 /home/gg/dev/hrm-laravel-base/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(59): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#36 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Barryvdh\Debugbar\Middleware\InjectDebugbar->handle()
#37 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#38 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#39 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle()
#40 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#41 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#42 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle()
#43 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#44 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle()
#45 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#46 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle()
#47 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(48): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#48 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle()
#49 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#50 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle()
#51 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#52 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle()
#53 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#54 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle()
#55 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#56 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then()
#57 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter()
#58 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle()
#59 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(368): Illuminate\Foundation\Testing\TestCase->call()
#60 /home/gg/dev/hrm-laravel-base/tests/Feature/Portal/CompletePortalTest.php(140): Illuminate\Foundation\Testing\TestCase->get()
#61 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(1656): Tests\Feature\Portal\CompletePortalTest->manager_can_access_manager_portal()
#62 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(514): PHPUnit\Framework\TestCase->runTest()
#63 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#64 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run()
#65 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#66 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#67 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#68 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#69 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run()
#70 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/src/Kernel.php(103): PHPUnit\TextUI\Application->run()
#71 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(184): Pest\Kernel->handle()
#72 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(192): {closure:/home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest:18}()
#73 {main}

----------------------------------------------------------------------------------

Class "App\Http\Controllers\Portal\Carbon" not found

  at tests/Feature/Portal/CompletePortalTest.php:141
    137▕     {
    138▕         $this->actingAsManager();
    139▕ 
    140▕         $response = $this->get(route('portal.manager.dashboard'));
  ➜ 141▕         $response->assertStatus(200);
    142▕         $response->assertSee('Manager Portal');
    143▕ 
    144▕         $response = $this->get(route('portal.manager.team-attendance'));
    145▕         $response->assertStatus(200);

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Portal\CompletePortalTest > employee can view paysl…   
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/Portal/CompletePortalTest.php:163
    159▕             'status' => 'paid'
    160▕         ]);
    161▕ 
    162▕         $response = $this->get(route('portal.employee.payslips.show', $payslip));
  ➜ 163▕         $response->assertStatus(200);
    164▕         $response->assertSee('Payslip Details');
    165▕     }
    166▕ 
    167▕     #[Test]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Portal\CompletePortalTest > employee cannot view ot…   
  Expected response status code [403] but received 404.
Failed asserting that 404 is identical to 403.

  at tests/Feature/Portal/CompletePortalTest.php:179
    175▕         $this->actingAsRegularEmployee();
    176▕ 
    177▕         $response = $this->get(route('portal.employee.payslips.show', $payslip));
    178▕         // dd(['cp' => $response]);
  ➜ 179▕         $response->assertStatus(403);
    180▕     }
    181▕ 
    182▕     #[Test]
    183▕     public function attendance_records_show_correct_summary()

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Portal\EmployeePortalTest > employee can clock in a…   
  Failed asserting that a row in the table [attendance_records] matches the attributes {
    "employee_id": 3,
    "type": "clock_in"
}.

Found similar results: [
    {
        "employee_id": 3,
        "\"type\"": "type"
    }
].

  at tests/Feature/Portal/EmployeePortalTest.php:120
    116▕         $response = $this //->actingAs($this->employee)
    117▕             ->post(route('portal.employee.clock-in'));
    118▕ 
    119▕         $response->assertStatus(200);
  ➜ 120▕         $this->assertDatabaseHas('attendance_records', [
    121▕             'employee_id' => $this->employee->id,
    122▕             'type' => 'clock_in'
    123▕         ]);
    124▕     }

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Portal\ManagerPortalTest > manager can access their…   
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Error: Class "App\Http\Controllers\Portal\Carbon" not found in /home/gg/dev/hrm-laravel-base/app/Http/Controllers/Portal/ManagerPortalController.php:172
Stack trace:
#0 /home/gg/dev/hrm-laravel-base/app/Http/Controllers/Portal/ManagerPortalController.php(149): App\Http\Controllers\Portal\ManagerPortalController->calculateTeamAttendanceRate()
#1 /home/gg/dev/hrm-laravel-base/app/Http/Controllers/Portal/ManagerPortalController.php(30): App\Http\Controllers\Portal\ManagerPortalController->getTeamMetrics()
#2 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(46): App\Http\Controllers\Portal\ManagerPortalController->dashboard()
#3 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch()
#4 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#5 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#6 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}()
#7 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Auth/Middleware/EnsureEmailIsVerified.php(41): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#8 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\EnsureEmailIsVerified->handle()
#9 /home/gg/dev/hrm-laravel-base/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(59): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#10 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Barryvdh\Debugbar\Middleware\InjectDebugbar->handle()
#11 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#12 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle()
#13 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#14 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle()
#15 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/VerifyCsrfToken.php(87): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#16 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\VerifyCsrfToken->handle()
#17 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/View/Middleware/ShareErrorsFromSession.php(48): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#18 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\View\Middleware\ShareErrorsFromSession->handle()
#19 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(120): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#20 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(63): Illuminate\Session\Middleware\StartSession->handleStatefulRequest()
#21 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Session\Middleware\StartSession->handle()
#22 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/AddQueuedCookiesToResponse.php(36): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#23 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle()
#24 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/EncryptCookies.php(74): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#25 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Cookie\Middleware\EncryptCookies->handle()
#26 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#27 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then()
#28 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack()
#29 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute()
#30 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute()
#31 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch()
#32 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}()
#33 /home/gg/dev/hrm-laravel-base/vendor/livewire/livewire/src/Features/SupportDisablingBackButtonCache/DisableBackButtonCacheMiddleware.php(19): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}()
#34 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Livewire\Features\SupportDisablingBackButtonCache\DisableBackButtonCacheMiddleware->handle()
#35 /home/gg/dev/hrm-laravel-base/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(59): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#36 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Barryvdh\Debugbar\Middleware\InjectDebugbar->handle()
#37 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#38 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#39 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle()
#40 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#41 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle()
#42 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle()
#43 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#44 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle()
#45 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#46 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle()
#47 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(48): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#48 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle()
#49 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#50 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle()
#51 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#52 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle()
#53 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#54 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle()
#55 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}()
#56 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then()
#57 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter()
#58 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle()
#59 /home/gg/dev/hrm-laravel-base/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(368): Illuminate\Foundation\Testing\TestCase->call()
#60 /home/gg/dev/hrm-laravel-base/tests/Feature/Portal/ManagerPortalTest.php(34): Illuminate\Foundation\Testing\TestCase->get()
#61 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(1656): Tests\Feature\Portal\ManagerPortalTest->manager_can_access_their_portal_dashboard()
#62 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(514): PHPUnit\Framework\TestCase->runTest()
#63 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#64 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run()
#65 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#66 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#67 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#68 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#69 /home/gg/dev/hrm-laravel-base/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run()
#70 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/src/Kernel.php(103): PHPUnit\TextUI\Application->run()
#71 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(184): Pest\Kernel->handle()
#72 /home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest(192): {closure:/home/gg/dev/hrm-laravel-base/vendor/pestphp/pest/bin/pest:18}()
#73 {main}

----------------------------------------------------------------------------------

Class "App\Http\Controllers\Portal\Carbon" not found

  at tests/Feature/Portal/ManagerPortalTest.php:36
     32▕     {
     33▕         $response = $this //->actingAs($this->manager)
     34▕             ->get(route('portal.manager.dashboard'));
     35▕ 
  ➜  36▕         $response->assertStatus(200);
     37▕         $response->assertSee('Manager Portal');
     38▕         $response->assertSee('Team management');
     39▕     }
     40▕     #[Test]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Portal\ManagerPortalTest > manager can approve leav…   
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/Portal/ManagerPortalTest.php:65
     61▕ 
     62▕         $response = $this //->actingAs($this->manager)
     63▕             ->post(route('portal.manager.leave.approve', $leaveRequest->id));
     64▕ 
  ➜  65▕         $response->assertStatus(200);
     66▕         $this->assertDatabaseHas('leave_requests', [
     67▕             'id' => $leaveRequest->id,
     68▕             'status' => 'approved'
     69▕         ]);

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Portal\ManagerPortalTest >…   RouteNotFoundException   
  Route [portal.manager.team-report] not defined.

  at vendor/laravel/framework/src/Illuminate/Routing/UrlGenerator.php:526
    522▕             ! is_null($url = call_user_func($this->missingNamedRouteResolver, $name, $parameters, $absolute))) {
    523▕             return $url;
    524▕         }
    525▕ 
  ➜ 526▕         throw new RouteNotFoundException("Route [{$name}] not defined.");
    527▕     }
    528▕ 
    529▕     /**
    530▕      * Get the URL for a given route instance.

      [2m+2 vendor frames [22m
  3   tests/Feature/Portal/ManagerPortalTest.php:82

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\SetupWizardTest > it assigns admin role to creator     
  '["inventory_admin"]' does not match expected type "array".

  at tests/Feature/SetupWizardTest.php:99
     95▕         $this->assertEquals('Test Org', $organization->name);
     96▕ 
     97▕         // Check the pivot data
     98▕         $pivot = $user->organizations()->first()->pivot;
  ➜  99▕         $this->assertEquals([InventoryRoles::INVENTORY_ADMIN], $pivot->roles);
    100▕ 
    101▕         // Check that organization unit was created with correct organization_id
    102▕         $this->assertDatabaseHas('organization_units', [
    103▕             'name' => 'Head Office',

  1   tests/Feature/SetupWizardTest.php:99

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\TaxManagementTest > user can create tax rate           
  Failed asserting that '7.5000' is identical to 7.5.

  at tests/Feature/TaxManagementTest.php:37
     33▕     ]));
     34▕ 
     35▕     expect($taxRate)->toBeInstanceOf(TaxRate::class);
     36▕     expect($taxRate->name)->toBe('Test Sales Tax');
  ➜  37▕     expect($taxRate->rate)->toBe(7.5);
     38▕     expect($taxRate->getTypeDisplayName())->toBe('Sales Tax');
     39▕ });
     40▕ 
     41▕ test('user can update tax rate', function () {

  1   tests/Feature/TaxManagementTest.php:37

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\TaxManagementTest > user can update…  QueryException   
  SQLSTATE[23000]: Integrity constraint violation: 19 NOT NULL constraint failed: tax_rates.organization_id (Connection: sqlite, SQL: insert into "tax_rates" ("name", "code", "type", "rate", "tax_jurisdiction_id", "is_compound", "is_active", "effective_date", "end_date", "description", "applicable_accounts", "gl_account_code", "updated_at", "created_at") values (et vel omnis, YSY, income, 20.1691, ?, 0, 1, 2025-04-07 00:00:00, ?, Quisquam corrupti excepturi illo neque harum tempore., ?, ?, 2025-11-25 06:34:44, 2025-11-25 06:34:44))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:570
    566▕             $this->bindValues($statement, $this->prepareBindings($bindings));
    567▕ 
    568▕             $this->recordsHaveBeenModified();
    569▕ 
  ➜ 570▕             return $statement->execute();
    571▕         });
    572▕     }
    573▕ 
    574▕     /**

      [2m+15 vendor frames [22m
  16  tests/Feature/TaxManagementTest.php:42

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\TaxManagementTest > tax rate scope active works cor…   
  Failed asserting that actual size 2 matches expected size 1.

  at tests/Feature/TaxManagementTest.php:74
     70▕         'effective_date' => now()->addDays(10),
     71▕     ]);
     72▕ 
     73▕     $activeRates = TaxRate::active()->get();
  ➜  74▕     expect($activeRates)->toHaveCount(1);
     75▕ });
     76▕ 
     77▕ // Tax Jurisdiction Tests
     78▕ test('user can create tax jurisdiction', function () {

  1   tests/Feature/TaxManagementTest.php:74

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\TaxManagementTest > tax calculation service calcula…   
  Failed asserting that '100.00' is identical to 100.0.

  at tests/Feature/TaxManagementTest.php:179
    175▕     $taxService = new TaxCalculationService;
    176▕     $calculations = $taxService->calculateTaxes($voucher, 1000, 'sales');
    177▕ 
    178▕     expect($calculations)->toHaveCount(1);
  ➜ 179▕     expect($calculations->first()->tax_amount)->toBe(100.0);
    180▕     expect($calculations->first()->base_amount)->toBe(1000.0);
    181▕ });
    182▕ 
    183▕ test('tax calculation service applies exemptions correctly', function () {

  1   tests/Feature/TaxManagementTest.php:179

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\TaxManagementTest > tax calculation service applies…   
  Failed asserting that '25.00' is identical to 50.0.

  at tests/Feature/TaxManagementTest.php:210
    206▕     $taxService = new TaxCalculationService;
    207▕     $calculations = $taxService->calculateTaxes($voucher, 1000, 'sales', $customer);
    208▕ 
    209▕     expect($calculations)->toHaveCount(1);
  ➜ 210▕     expect($calculations->first()->tax_amount)->toBe(50.0); // 10% of 50% exempted amount
    211▕     expect($calculations->first()->taxable_amount)->toBe(500.0);
    212▕ });
    213▕ 
    214▕ test('tax calculation service handles compound taxes', function () {

  1   tests/Feature/TaxManagementTest.php:210

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\TaxManagementTest > tax calculation service handles…   
  Failed asserting that '100.00' is identical to 100.0.

  at tests/Feature/TaxManagementTest.php:245
    241▕ 
    242▕     $baseTaxCalc = $calculations->firstWhere('tax_rate_id', $baseTax->id);
    243▕     $compoundTaxCalc = $calculations->firstWhere('tax_rate_id', $compoundTax->id);
    244▕ 
  ➜ 245▕     expect($baseTaxCalc->tax_amount)->toBe(100.0); // 10% of 1000
    246▕     expect($compoundTaxCalc->tax_amount)->toBe(55.0); // 5% of (1000 + 100)
    247▕ });
    248▕ 
    249▕ // Tax Reporting Service Tests

  1   tests/Feature/TaxManagementTest.php:245

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\TaxManagementTest > tax reporting s…  QueryException   
  SQLSTATE[23000]: Integrity constraint violation: 19 NOT NULL constraint failed: tax_calculations.calculable_type (Connection: sqlite, SQL: insert into "tax_calculations" ("calculable_type", "calculable_id", "tax_rate_id", "tax_exemption_id", "base_amount", "taxable_amount", "tax_rate", "tax_amount", "calculation_date", "calculation_method", "calculation_details", "notes", "organization_id", "updated_at", "created_at") values (?, ?, 1, ?, 1000, 110.15, 12.7664, 100, 2025-11-25 06:34:45, percentage, {"exemption_percentage":0,"is_compound":false}, ?, 1, 2025-11-25 06:34:45, 2025-11-25 06:34:45))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:570
    566▕             $this->bindValues($statement, $this->prepareBindings($bindings));
    567▕ 
    568▕             $this->recordsHaveBeenModified();
    569▕ 
  ➜ 570▕             return $statement->execute();
    571▕         });
    572▕     }
    573▕ 
    574▕     /**

      [2m+16 vendor frames [22m
  17  tests/Feature/TaxManagementTest.php:254

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\TaxManagementTest > tax compliance…   QueryException   
  SQLSTATE[23000]: Integrity constraint violation: 19 NOT NULL constraint failed: tax_calculations.calculable_type (Connection: sqlite, SQL: insert into "tax_calculations" ("calculable_type", "calculable_id", "tax_rate_id", "tax_exemption_id", "base_amount", "taxable_amount", "tax_rate", "tax_amount", "calculation_date", "calculation_method", "calculation_details", "notes", "organization_id", "updated_at", "created_at") values (?, ?, 1, ?, 5689.14, 3667.68, 1.4218, 100, 2025-11-25 06:34:45, percentage, {"exemption_percentage":0,"is_compound":false}, Soluta in sit ab enim., 1, 2025-11-25 06:34:45, 2025-11-25 06:34:45))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:570
    566▕             $this->bindValues($statement, $this->prepareBindings($bindings));
    567▕ 
    568▕             $this->recordsHaveBeenModified();
    569▕ 
  ➜ 570▕             return $statement->execute();
    571▕         });
    572▕     }
    573▕ 
    574▕     /**

      [2m+16 vendor frames [22m
  17  tests/Feature/TaxManagementTest.php:280

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\TaxManagementTest > tax calculations are properly s…   
  Failed asserting that actual size 0 matches expected size 1.

  at tests/Feature/TaxManagementTest.php:391
    387▕     // Calculate taxes for org2
    388▕     $calculations2 = $taxService->calculateTaxes($voucher2, 1000, 'sales');
    389▕ 
    390▕     // Verify calculations are separate
  ➜ 391▕     expect($calculations1)->toHaveCount(1);
    392▕     expect($calculations2)->toHaveCount(1);
    393▕     expect($calculations1->first()->tax_rate_id)->toBe($taxRate1->id);
    394▕     expect($calculations2->first()->tax_rate_id)->toBe($taxRate2->id);
    395▕ });

  1   tests/Feature/TaxManagementTest.php:391


  Tests:    70 failed, 6 risky, 4 skipped, 541 passed (2000 assertions)
  Duration: 22.49s

